<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Fadhil Books &amp; Notes</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Fadhil Books &amp; Notes</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="introduction"><a class="header" href="#introduction">Introduction</a></h1>
<p>Let me introduce my self, Who is Fadhil? Fadhil Riyanto (real-name), is a self-taught system programmer which live in Indonesian, This is some short &amp; dirty tutorial about computer science and litte about math.</p>
<h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<p>Found a mistake? You can freely DM me on <a href="https://t.me/fadhil_riyanto">telegram</a> or just email me on</p>
<ul>
<li><a href="mailto:me@fadev.org">me@fadev.org</a> (primary, fast respond)</li>
<li><a href="mailto:fadhilriyanto@duck.com">fadhilriyanto@duck.com</a> (gmail mirror)</li>
<li><a href="mailto:fadhil.riyanto@gnuweeb.org">fadhil.riyanto@gnuweeb.org</a> (alternative-1)</li>
<li><a href="mailto:xor@3xploit.dev">xor@3xploit.dev</a> (alternative-2)</li>
</ul>
<h1 id="language"><a class="header" href="#language">Language</a></h1>
<p>Because I'm indonesian, some part of this website may written in indonesian. But I will try to translating it into english language.</p>
<div class="warning">
<p>Note</p>
<p>[EN] If you found a mistake, let me know. BIG thanks!  <br>
[ID] Jika kamu menemukan sesuatu yang sepertinya itu salah, bisa langsung kasih kabar ke saya. Terimakasih.</p>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="system-programming"><a class="header" href="#system-programming">System programming</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-data-movement-changes-a-destination-register"><a class="header" href="#how-data-movement-changes-a-destination-register">How data movement changes a destination register</a></h1>
<p>This snippets is from "Computer Systems A Programmer’s Perspective, by Randal E. Bryant and David R. O’Hallaron"</p>
<p>As described, there are two different conventions regarding whether and how data movement instruc-
tions modify the upper bytes of a destination register. This distinction is illustrated by the following
code sequence:</p>
<pre><code class="language-txt">1 movabsq $0x0011223344556677, %rax %rax = 0011223344556677
2 movb $-1, %al %rax = 00112233445566FF
3 movw $-1, %ax %rax = 001122334455FFFF
4 movl $-1, %eax %rax = 00000000FFFFFFFF
5 movq $-1, %rax %rax = FFFFFFFFFFFFFFFF
</code></pre>
<p>In the following discussion, we use hexadecimal notation. In the example, the instruction on line 1
initializes register %rax to the pattern 0011223344556677. The remaining instructions have immediate
value −1 as their source values. Recall that the hexadecimal representation of −1 is of the form FF. . .F,
where the number of F’s is twice the number of bytes in the representation. The movb instruction (line 2)
therefore sets the low-order byte of %rax to FF, while the movw instruction (line 3) sets the low-order
2 bytes to FFFF, with the remaining bytes unchanged. The movl instruction (line 4) sets the low-order
4 bytes to FFFFFFFF, but it also sets the high-order 4 bytes to 00000000. Finally, the movq instruction
(line 5) sets the complete register to FFFFFFFFFFFFFFFF.</p>
<p>some useful links</p>
<ul>
<li><a href="https://stackoverflow.com/questions/52434073/whats-the-difference-between-the-x86-64-att-instructions-movq-and-movabsq">https://stackoverflow.com/questions/52434073/whats-the-difference-between-the-x86-64-att-instructions-movq-and-movabsq</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="general-embedded-asm-linked-in-c"><a class="header" href="#general-embedded-asm-linked-in-c">General embedded ASM linked in C</a></h1>
<p>this is program is succesfully compiled with <code>as</code>, but failed to run due to SIGSEGV.</p>
<p>this is will fail</p>
<pre><code class="language-asm">.data
val:
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    

.globl do_asm

do_asm:
    # movl 0x12345678, %eax
    # movl 0xAABBCCDD, %edx 

    # # move edx 8 bit high into al (eax)
    # movb %dh, %al

    
    movq $9, %rax
    ret

</code></pre>
<p>this is will compile</p>
<pre><code class="language-asm">.data
val:
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    

.globl do_asm

.text
do_asm:
    # movl 0x12345678, %eax
    # movl 0xAABBCCDD, %edx 

    # # move edx 8 bit high into al (eax)
    # movb %dh, %al

    
    movq $9, %rax
    ret

</code></pre>
<p>the difference only in <code>.text</code> section</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="move-sign--zero-extends-a-single-byte"><a class="header" href="#move-sign--zero-extends-a-single-byte">Move sign &amp; zero-extends a single byte</a></h1>
<p>Disini saya akan membahas apa itu instruksi MOVSBL dan MOVZBL. pertama tama silahkan baca dulu disini</p>
<ul>
<li><a href="https://stackoverflow.com/questions/7861095/what-does-movsbl-instruction-do">https://stackoverflow.com/questions/7861095/what-does-movsbl-instruction-do</a></li>
</ul>
<pre><code class="language-txt">MOVSBL and MOVZBL
* MOVSBL sign-extends a single byte, and copies it into a
  double-word destination
* MOVZBL expands a single byte to 32 bits with 24 leading
  zeros, and copies it into a double-word destination
</code></pre>
<p>pertama tama, lihat kode asm ini.</p>
<pre><code class="language-asm">
.section .data
val:
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    .byte 0xF6
    

.globl do_asm

.text
do_asm:
    movl $0x12345678, %eax
    movl $0xAABBCCDD, %edx 

    # move edx 8 bit high into al (eax)
    movb %dh, %al

    # reset
    movl $0x12345678, %eax
    movl $0xAABBCCDD, %edx 

    MOVSBL %dh, %eax

    # reset
    movl $0x12345678, %eax
    movl $0xAABBCCDD, %edx 

    MOVZBL %dh, %eax

    
    movq $9, %rax
    ret

</code></pre>
<p>dan ini hasilnya, movb biasa (tanpa hapus bagian atas data, bagian atas tetep utuh)
<img src="sysprog//assets/movsbl-1.png" alt="gambar" /></p>
<p>ini hasil signed bagian atas
<img src="sysprog//assets/movsbl-2.png" alt="gambar" /></p>
<p>ini hasil ketika bagian atas kita zerokan
<img src="sysprog//assets/movzbl-3.png" alt="gambar" /></p>
<p>catatan
<code>movb %dh, %al</code> memindahkan rdx bagian high ke rax bagian bawah.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="movabsq"><a class="header" href="#movabsq">movabsq</a></h1>
<p>simplenya, ini kepanjangan dari move absolute quad word (64 bit)
contoh kecil</p>
<p><img src="sysprog//assets/eb8833cdb401abff39e22474d9ff5b2eb3f2540eba9687d889d6f9a4e435b8fabe993f5b8213122bd7fd7dac70efd0f5c9f62c1d9cb8f3995c340d26.png" alt="image" /></p>
<p>itu contoh initial moveabsq int 64 bit, lalu</p>
<p><img src="sysprog//assets/ee8e49f3fcdca5ab81c260f0de3a64d672c609ab252dcab094e5840a7d7bfefcaf2a8be83085daf33dbb8e45fb4626e2a25f0ddfa68a9fecc12ef848.png" alt="image" />
contoh move 1 bytes</p>
<p><img src="sysprog//assets/d05c2e568339a6f4c057091bb8578450d38dd00b154b141d530e2c0694852fb3c07829028af8ee233f33996ebfcc2ea29ca7a11d3b0eabe9c1ca8880.png" alt="image" />
move 16 bit, 2 bytes word</p>
<p><img src="sysprog//assets/6c223330945fca3f1f45e07fa66de88bbd9281187602069790b89fe9e7be6f94f1d2545734445512951ae4a3e674e498163b742ddc877572e7b21741.png" alt="image" />
move 32 bit, 4 bytes, tapi disini keformat sebagai int32 wkwk</p>
<p><img src="sysprog//assets/7dfc4195b63c65217c9b7e4162ee957287f352e5cc2070e73bc081e9b453aa2ee24cea30fe9af644e15f49a3c17eaaa2382a5daf28d98528e508c3f2.png" alt="image" />
full 64 bit move</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="x86_64-register-fiks-technical-grade"><a class="header" href="#x86_64-register-fiks-technical-grade">x86_64 register (fiks technical grade)</a></h1>
<p><img src="sysprog//assets/calling_convention_page-0001.jpg" alt="gambar" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="analisis-kenapa-pakai-movabsq-daripada-movq"><a class="header" href="#analisis-kenapa-pakai-movabsq-daripada-movq">analisis kenapa pakai movabsq, daripada movq</a></h1>
<p>movq hanya bisa accept integer</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="analisis-patch-movq-pakai-0xffffffff"><a class="header" href="#analisis-patch-movq-pakai-0xffffffff">analisis patch movq pakai 0xffffffff</a></h1>
<p>ada asm</p>
<p><img src="sysprog//assets/396baa16bda2bcebbef7d1403edf680c8f5c58d1e5d13e396d9187a7e106a69d95b21a892095d794cf8d80e03fba5ee8faa3d61e3eab21d78d2fb9b1.png" alt="image" /></p>
<p>kita akan memaksa dari 0x7fffffff menjadi 0xffffffff untuk membuktikan bahwa harusnya movq error, dan digantikan oleh movabsq</p>
<p>initial dulu
<img src="sysprog//assets/46453cea0bda238960726005cf23bc143f51ffe55f0b632fec36ca3b4846d7dee3ad43e7ab4841b29e64d1a9344ee30bbb3ea46e8812f2b3f9f64a24.png" alt="image" /></p>
<p>lalu, next replace address 0x555555555119 dengan</p>
<pre><code class="language-txt">set {unsigned char[8]}0x555555555119 = {0x48, 0xc7, 0xc0, 0xff, 0xff, 0xff, 0xff, 0x90}
</code></pre>
<p>confirmed berubah jadi 0xffffffff disini
<img src="sysprog//assets/183193f1ed20460acef3b46f25d34f4362c97d685aa27c440ecf464d0036cddab2a92fad306c6018a9911aa10b27b1ab130a443ca9c0edcbe6f61a68.png" alt="image" /></p>
<p>saatnya kita lanjutkan, apakah error
<img src="sysprog//assets/c160ad95471ba78693869c17396b2ce78d2dd142abfb1232dfd08532438a3823f5746823e3061b802421b731067d432ee3dc7df6dd1980159bfd4d10.png" alt="image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ext4-unknown-ro-compact-features"><a class="header" href="#ext4-unknown-ro-compact-features">ext4 unknown RO compact features</a></h1>
<p>this error come from linux kernel</p>
<pre><code class="language-c">	/* Check that feature set is OK for a read-write mount */
	if (ext4_has_unknown_ext4_ro_compat_features(sb)) {
		ext4_msg(sb, KERN_ERR, "couldn't mount RDWR because of "
			 "unsupported optional features (%x)",
			 (le32_to_cpu(EXT4_SB(sb)-&gt;s_es-&gt;s_feature_ro_compat) &amp;
				~EXT4_FEATURE_RO_COMPAT_SUPP));
		return 0;
	}
</code></pre>
<p>which EXT4_FEATURE_RO_COMPAT_SUPP</p>
<pre><code class="language-c">#define EXT4_FEATURE_RO_COMPAT_SUPP	(EXT4_FEATURE_RO_COMPAT_SPARSE_SUPER| \
					 EXT4_FEATURE_RO_COMPAT_LARGE_FILE| \
					 EXT4_FEATURE_RO_COMPAT_GDT_CSUM| \
					 EXT4_FEATURE_RO_COMPAT_DIR_NLINK | \
					 EXT4_FEATURE_RO_COMPAT_EXTRA_ISIZE | \
					 EXT4_FEATURE_RO_COMPAT_BTREE_DIR |\
					 EXT4_FEATURE_RO_COMPAT_HUGE_FILE |\
					 EXT4_FEATURE_RO_COMPAT_BIGALLOC |\
					 EXT4_FEATURE_RO_COMPAT_METADATA_CSUM|\
					 EXT4_FEATURE_RO_COMPAT_QUOTA |\
					 EXT4_FEATURE_RO_COMPAT_PROJECT |\
					 EXT4_FEATURE_RO_COMPAT_VERITY |\
					 EXT4_FEATURE_RO_COMPAT_ORPHAN_PRESENT)
</code></pre>
<pre><code class="language-c">#define EXT4_FEATURE_RO_COMPAT_GDT_CSUM		0x0010
</code></pre>
<p><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/ext4/ext4.h#n2188">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/ext4/ext4.h#n2188</a></p>
<p><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/ext4/ext4.h#n2024">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/fs/ext4/ext4.h#n2024</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="qemu-custom-cpio-hda"><a class="header" href="#qemu-custom-cpio-hda">qemu custom cpio HDA</a></h1>
<p>skrip init custom linux</p>
<pre><code class="language-sh">qemu-system-x86_64 \-kernel ./vmlinux \
                                                 -nographic \
                                                 --append "console=tty0 console=ttyS0 panic=1 root=/dev/sda rootfstype=ext2" \
                                                 -hda root.img \
                                                 -m 1024 \
                                                 -vga none \
                                                 -display none \
                                                 -serial mon:stdio \
                                                 -no-reboot \
                                                 -initrd vfs/root.cpio.gz
</code></pre>
<p>generate cpio</p>
<pre><code class="language-sh">find . | cpio -o -H newc | gzip &gt; root.cpio.gz
``</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="step-tcp"><a class="header" href="#step-tcp">step TCP</a></h1>
<p>TCP steps</p>
<ul>
<li>isi dulu sockaddr_storage, isi pakai inet_pton(); .so_family = AF_INET; sin_port = htons(port)</li>
<li>syscall socket(AF_INET, SOCK_STREAM, 0);</li>
<li>setsocksopt(fd, SO_REUSEADDR = 1)</li>
<li>bind(fd, ss_addr (cast dulu ke sockaddr_in), len nya)</li>
<li>listen()</li>
</ul>
<p>penjelasan ttg kenapa pakai sockaddr_storage dipakai
https://stackoverflow.com/questions/19528820/difference-between-sockaddr-and-sockaddr-storage</p>
<p>kenapa harus setsocksopt SO_REUSEADDR? karna jika tidak, TCP Masuk ke timewait state.</p>
<p>sekiranya itu aja sih step TCP ini. untuk UDP pakai aja dgram.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gdb-attach"><a class="header" href="#gdb-attach">GDB attach</a></h1>
<p>jadi ceritanya, ada bug yg kala di run di terminal, ia buggy, pas di run di gdb, dia gak error sama sekali</p>
<p>gw bingung dah, nah disini. ternyata ada trick nya</p>
<ul>
<li>
<p>jalanin dulu programnya kek biasa di terminal, dah running kan</p>
</li>
<li>
<p>ambil pid nya pakai ps aux | grep xyz</p>
</li>
<li>
<p>setelah dapet pid nya, jalankan gdb dengan mode attach pid</p>
</li>
</ul>
<p>pakai <code>sudo gdb -p 12345</code></p>
<ul>
<li>program akan freeze sejenak, pencet <code>c</code>, <code>enter</code></li>
</ul>
<p>nah, lakukan cara yg dipake buat reproduce bug nya, misal pakai nc buat nyepam tcp ke program. ok dapet bug nya</p>
<p>ni kalau kata orang internet, beberapa bug kek app multi thread agak susah di caught. pakai valgrind pun perlu flags2 khusus buat inspect sampai thread nya</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="hasil-oprek-socket-programming-case-socks5-server"><a class="header" href="#hasil-oprek-socket-programming-case-socks5-server">hasil oprek socket programming, case socks5 server</a></h1>
<p>bagian IETF SOCKS5 section 6</p>
<p><a href="https://datatracker.ietf.org/doc/html/rfc1928#section-6">https://datatracker.ietf.org/doc/html/rfc1928#section-6</a></p>
<p>BND.ADDR haruslah berupa IPV4/IPV6 address, bukan domain :)</p>
<p>secara general, bentuk packet yg akan dikirim untuk versi IPV4 seperti ini</p>
<pre><code class="language-txt">[0] [VER] =&gt; 0x5
[1] [REP] =&gt; 0x0
[2] [RSV] =&gt; 0x0
[3] [ATYP] =&gt; 0x1 atau 0x4
[4] [BND.ADDR] 0xac
[5] [BND.ADDR] 0x43
[6] [BND.ADDR] 0x93
[7] [BND.ADDR] 0x39
[8] [BND.PORT] 0x50 
[9] [BND.PORT] 0x50
</code></pre>
<p>maka perhitungannya memory awal + 4 (karna 4 field dah dipakai), start dari sini, insert 4 oktet lagi ipv4 address, lalu insert 2 oktet uint8 sebagai port.</p>
<p>bagian BND.PORT itu unsigned int 16 bit. jadi harus digabung bitnya + diubah dari network order ke host order</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fix-ncurses-kernel-build"><a class="header" href="#fix-ncurses-kernel-build">fix ncurses kernel build</a></h1>
<p>suppose</p>
<pre><code class="language-txt">*** Unable to find the ncurses libraries or the
 *** required header files.
 *** 'make menuconfig' requires the ncurses libraries.
 *** 
 *** Install ncurses (ncurses-devel) and try again.
 *** 
make[2]: *** [/home/fadhil_riyanto/linux-kernel/busybox-1.37.0/scripts/kconfig/lxdialog/Makefile:15: scripts/kconfig/lxdialog/dochecklxdialog] Error 1
make[1]: *** [/home/fadhil_riyanto/linux-kernel/busybox-1.37.0/scripts/kconfig/Makefile:14: menuconfig] Error 2
make: *** [Makefile:444: menuconfig] Error 2
</code></pre>
<p>maka solusi
<code>nano scripts/kconfig/lxdialog/Makefile</code></p>
<p>ubah</p>
<pre><code class="language-txt">always         := $(hostprogs-y) dochecklxdialog
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="php-src-variadic-params"><a class="header" href="#php-src-variadic-params">PHP-SRC variadic params</a></h1>
<p>the source code: <a href="https://github.com/php/php-src/blob/ba6c00505d4218ff9fe4feb060f636524acfb125/ext/standard/array.c#L1204">https://github.com/php/php-src/blob/ba6c00505d4218ff9fe4feb060f636524acfb125/ext/standard/array.c#L1204</a></p>
<p>mayan ngebantu jg gw ngepahami variadic params di php.
ref: <a href="https://www.zend.com/resources/php-extensions/basic-php-structures">https://www.zend.com/resources/php-extensions/basic-php-structures</a></p>
<p>selfnote :</p>
<p>ZEND_PARSE_PARAMETERS_START(num_required_args, num_max_args)
Z_PARAM_VARIADIC('*' or '+', destptr, argc);</p>
<p>catatan:</p>
<ul>
<li>* nol atau lebih parameter</li>
<li>+ satu atau lebih parameter</li>
</ul>
<p>nb: akan diupdate berkala</p>
<p>ref: https://wiki.php.net/rfc/fast_zpp</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="php-src-minit"><a class="header" href="#php-src-minit">PHP-SRC minit()</a></h1>
<p><a href="https://github.com/php/php-src/blob/3704947696fe0ee93e025fa85621d297ac7a1e4d/main/main.c#L2009">https://github.com/php/php-src/blob/3704947696fe0ee93e025fa85621d297ac7a1e4d/main/main.c#L2009</a></p>
<p>Ketika module PHP diload ke zend engine, yang dipanggil adalah MINIT(), di step ini yg terjadi cuman memory alokasi di ZendMM, dan disini engga ada process atau thread yg dijalan, pure cuman initialisasi data</p>
<p>nah, yang mentrigger MINIT() adalah zend_startup_modules(), trus secara beurutan, ia jg manggil RINIT() via PHP_RINIT_FUNCTION()</p>
<p>struct nya
<img src="sysprog//assets/71ee438d7728f41eb71942cc4e8b9693efcc03aa4ffd227e6c035b6aa383863ef79c48eb122af41f7ef3ec4eb4623a48560272461dc5ba20f83fd296.png" alt="image" /> zend_result (*request_startup_func)(INIT_FUNC_ARGS);</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="gcc-compiler-visibility"><a class="header" href="#gcc-compiler-visibility">gcc compiler visibility</a></h1>
<p>intresting buat diulik</p>
<pre><code class="language-cc">class rectangle {
        int width, height;

        public:
                void set_value(int, int);
                int area();
};

void rectangle::set_value(int x, int y) 
{
        width = x;
        height = y;
}


int rectangle::area()
{
        return width * height;
}

</code></pre>
<p>compile pakai</p>
<ul>
<li><code>g++ -Wall -c -fPIC abc.cc</code></li>
<li><code>g++ -o librec.so --shared abc.o</code></li>
<li><code>nm -C librec.so</code></li>
</ul>
<p>akan ada</p>
<pre><code class="language-txt">000000000000110e T rectangle::area()
00000000000010ea T rectangle::set_value(int, int)
</code></pre>
<p>nah, disitu kalau di compile pakai <code>-fvisibility=hidden</code>
ntar pas di cek pakai
<code>nm -CD librec.so </code></p>
<p>bakalan gak ada. nah ini ada kaitannya sama
<code>__attribute__ ((visibility ("hidden")))</code></p>
<p>tambahan: <a href="https://groups.google.com/g/ode-users/c/T3qiy-4dviQ">https://groups.google.com/g/ode-users/c/T3qiy-4dviQ</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="load-effective-address"><a class="header" href="#load-effective-address">load effective address</a></h1>
<p>computes a memory address using the same arithmetic that a MOV instruction uses. But unlike the MOV instruction, the LEA instruction just stores the computed address in its target register, instead of loading the contents of that address and storing it.</p>
<p>Consider your first LEA instruction:</p>
<p>tldr nya: mov bisa mengkalkulasi operasi aritmetika dari alamat memori, trus ngambil isinya
kalau lea, ia cuman mengkalkulasi alamatnya, hasil itung2an nya disimpan ke operand2</p>
<pre><code class="language-asm">lea -0x18(%ebp), %ebx
</code></pre>
<p>tambahan catatan</p>
<p>mov (op1, op2, op3), dest</p>
<p>equal (pseudo):
mov op1 + op2 * op3, dest</p>
<p>and
lea op1(op2), dest</p>
<p>equal
lea op2 + op1, dest (address of op2 + op1, store result into dest)</p>
<p>bahasan tentang rip
<a href="https://stackoverflow.com/questions/54745872/how-do-rip-relative-variable-references-like-rip-a-in-x86-64-gas-intel-sy">https://stackoverflow.com/questions/54745872/how-do-rip-relative-variable-references-like-rip-a-in-x86-64-gas-intel-sy</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="att-asm-prelude"><a class="header" href="#att-asm-prelude">AT&amp;T asm prelude</a></h1>
<p>push eax
equal with:
mov [esp], eax
sub esp, 4</p>
<p>pop eax
get values out of stack
equal with</p>
<p>add rsp, 4
mov eax, [esp]</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-stuff"><a class="header" href="#rust-stuff">Rust stuff</a></h1>
<p>Welcome in this rust stuff section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-cursor-how-it-works"><a class="header" href="#rust-cursor-how-it-works">Rust cursor, How it works</a></h1>
<p>Cursor in rust basically just a in-memory implementation of Seek. <a href="https://en.cppreference.com/w/c/io/fseek">see fseek() here</a></p>
<p>Imagine, we have a file. and this is representation of contents</p>
<pre><code class="language-txt">abcde
</code></pre>
<p>seek start from 1, is <code>bcde</code>, start from 2 is <code>cde</code> and so-on, this is also happen when we use seek from end, for example, seek end -1 is mean <code>e</code>, -2 is <code>de</code>, etc.</p>
<h1 id="from-code-perspective"><a class="header" href="#from-code-perspective">From code perspective</a></h1>
<p>this is signature of cursor</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>pub struct Cursor&lt;T&gt; {
    inner: T,
    pos: u64,
}
<span class="boring">}</span></code></pre></pre>
<p>and also, this struct implement <a href="https://doc.rust-lang.org/src/std/io/cursor.rs.html#566">Write</a> and <a href="https://doc.rust-lang.org/src/std/io/cursor.rs.html#289">Seek</a></p>
<p>so, in order to understanding this concept, let code first in C</p>
<pre><code class="language-c">
#include &lt;string.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;stdio.h&gt;

struct seekfd {
    FILE                *file;
};

int start_open(struct seekfd *seekfd) {
    seekfd-&gt;file = fopen("a.txt", "r");

    if (seekfd-&gt;file == NULL) {
        fprintf(stderr, "%s", "error");
        return -1;
    }
}

int do_op(struct seekfd *seekfd) {
    char allocated_buf[2048];
    memset(allocated_buf, 0, 2048);

    fseek(seekfd-&gt;file, 1, SEEK_SET);
    int ret = fread(allocated_buf, 1, 3, seekfd-&gt;file);

    printf("%s", allocated_buf);
}

int main() {
    struct seekfd seekfd;

    int ret = start_open(&amp;seekfd);
    if (ret &lt; 0) {
        return -9;
    }

    ret = do_op(&amp;seekfd);
    if (ret &lt; 0) {
        return ret;
    }
}
</code></pre>
<p>compile with</p>
<pre><code class="language-sh">clang fseek.c -o p -g
</code></pre>
<p>next step, create dummy files named a.txt with content <code>abcdefghijklmnopqr</code></p>
<p>first run with <code>fseek(seekfd-&gt;file, 0, SEEK_SET);</code> = <code>abc</code>
second run with <code>fseek(seekfd-&gt;file, 1, SEEK_SET);</code> = <code>bcd</code>
etc...</p>
<p>this concept is basically same in Rust</p>
<h1 id="rust-context"><a class="header" href="#rust-context">Rust context</a></h1>
<p>this is small example show Seek works (in-memory) instead utilize <em>real</em> file</p>
<pre><pre class="playground"><code class="language-rust">use std::io::prelude::*;
use std::io::{self, SeekFrom};
use std::io::Cursor;

fn write_bytes&lt;W: Write + Seek&gt;(mut w: W) -&gt; io::Result&lt;()&gt; {
    w.seek(SeekFrom::Start(5))?;
    
    for i in 1..6 {
        w.write(&amp;[i])?;
    }

    Ok(())
}


fn main() {
    let mut buf = Cursor::new(vec![0; 20]);
    write_bytes(&amp;mut buf).unwrap();
    println!("{:?}", &amp;buf.get_ref()); // print vector
}
</code></pre></pre>
<p>this is the output</p>
<pre><code class="language-txt">[0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0]
</code></pre>
<p>instead, we change <code>SeekFrom::Start(5)</code> with <code>SeekFrom::Start(10)</code>, the write will started at offset 10. this is the output</p>
<pre><code class="language-txt">[0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 2, 3, 4, 5, 0, 0, 0, 0, 0]
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-bytes-has_remaining-method"><a class="header" href="#rust-bytes-has_remaining-method">Rust bytes has_remaining() method</a></h1>
<p>this function return whatever any best left on buffer. example, let make simple tcp/ip</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>impl Connection {
    pub fn new(stream: TcpStream) -&gt; Connection {
        Connection {
            stream: BufWriter::new(stream),
            buffer: BytesMut::with_capacity(4096)
        }

    }

    pub async fn read(&amp;mut self) 
        -&gt; std::result::Result&lt;Option&lt;Frame&gt;, Box&lt;dyn std::error::Error + Send + Sync&gt;&gt; {
        
        let _ = self.stream.read_buf(&amp;mut self.buffer).await;
        println!("hasremaining: {}", self.buffer.has_remaining());
        
        while self.buffer.has_remaining() {
            let bytes = self.buffer.get_u8();
            println!("{} -&gt; {}", bytes as char, self.buffer.has_remaining());
        }

        println!("{}", self.buffer.has_remaining());
        // Frame::check(&amp;mut self.buffer);

        Ok(Some(Frame::Null))
    }
}
<span class="boring">}</span></code></pre></pre>
<p>let's see the server result using <code>ncat</code></p>
<p><img src="rust/../assets/tcp-ncat-snapshot.png" alt="ncat-result" /></p>
<p>which the input is something look like this</p>
<pre><code class="language-sh">[22:55:41] fadhil_riyanto@integral2 /home/fadhil_riyanto [SIGINT]
&gt; ncat 127.0.0.1 6380
abc

</code></pre>
<p>from this output, we know</p>
<pre><code class="language-txt">hasremaining: true &lt;--- this is initial, didn't mean anything
a -&gt; true &lt;--- a already read, but next char is b, why this is true
b -&gt; true &lt;--- next is c, also true
c -&gt; true &lt;--- next is \n char, also true

 -&gt; false &lt;--- this is false because no next chars
false &lt;--- confirm
</code></pre>
<p>Also, <code>get_u8</code> returns the first byte in the buffer. Each time it's called, it advances the position, so subsequent calls return the next bytes.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-rust-into-box--error-analysis"><a class="header" href="#how-rust-into-box--error-analysis">How Rust into() Box + Error analysis</a></h1>
<p>suppose, we have function return signature like this</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>std::result::Result&lt;Option&lt;Frame&gt;, Box&lt;dyn std::error::Error + Send + Sync&gt;&gt;
<span class="boring">}</span></code></pre></pre>
<p>and then, we return something like this from our function</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>return Err("connection reset".into())
<span class="boring">}</span></code></pre></pre>
<p>how the <code>into()</code> works?</p>
<h1 id="analysis"><a class="header" href="#analysis">analysis</a></h1>
<p>look at <a href="https://github.com/rust-lang/rust/blob/6e830462330a9e34d8176e86d4580dd0820c6fd5/library/alloc/src/boxed/convert.rs#L658">this</a> snippet</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[cfg(not(no_global_oom_handling))]
#[stable(feature = "rust1", since = "1.0.0")]
impl&lt;'a&gt; From&lt;&amp;str&gt; for Box&lt;dyn Error + Send + Sync + 'a&gt; {
    /// Converts a [`str`] into a box of dyn [`Error`] + [`Send`] + [`Sync`].
    ///
    /// [`str`]: prim@str
    ///
    /// # Examples
    ///
    /// ```
    /// use std::error::Error;
    /// use std::mem;
    ///
    /// let a_str_error = "a str error";
    /// let a_boxed_error = Box::&lt;dyn Error + Send + Sync&gt;::from(a_str_error);
    /// assert!(
    ///     mem::size_of::&lt;Box&lt;dyn Error + Send + Sync&gt;&gt;() == mem::size_of_val(&amp;a_boxed_error))
    /// ```
    #[inline]
    fn from(err: &amp;str) -&gt; Box&lt;dyn Error + Send + Sync + 'a&gt; {
        From::from(String::from(err))
    }
}
<span class="boring">}</span></code></pre></pre>
<p>if we go deeper into <code>From::from</code>, we found <a href="https://github.com/rust-lang/rust/blob/6e830462330a9e34d8176e86d4580dd0820c6fd5/library/alloc/src/boxed/convert.rs#L608">this</a></p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[inline]
    fn from(err: String) -&gt; Box&lt;dyn Error + Send + Sync + 'a&gt; {
        struct StringError(String);

        impl Error for StringError {
            #[allow(deprecated)]
            fn description(&amp;self) -&gt; &amp;str {
                &amp;self.0
            }
        }

        impl fmt::Display for StringError {
            fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
                fmt::Display::fmt(&amp;self.0, f)
            }
        }

        // Purposefully skip printing "StringError(..)"
        impl fmt::Debug for StringError {
            fn fmt(&amp;self, f: &amp;mut fmt::Formatter&lt;'_&gt;) -&gt; fmt::Result {
                fmt::Debug::fmt(&amp;self.0, f)
            }
        }

        Box::new(StringError(err))
    }
<span class="boring">}</span></code></pre></pre>
<p>nb: actually StringError is string aliases. then, we see in this section. we created a heap-allocated using <code>Box::new(StringError(err))</code>.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-buffer-advance"><a class="header" href="#rust-buffer-advance">Rust buffer advance</a></h1>
<p>this simple article show how buffer advance works</p>
<pre><pre class="playground"><code class="language-rust">use bytes::Buf;

fn main() {
    let mut buf = &amp;b"hello world"[..];

    println!("{}", String::from_utf8_lossy(buf.chunk()));

    buf.advance(6);
    println!("{}", String::from_utf8_lossy(buf.chunk()));
}
</code></pre></pre>
<p>and the result</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>hello world
world
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-resp-get_line-analysis"><a class="header" href="#rust-resp-get_line-analysis">Rust RESP get_line analysis</a></h1>
<p>if we look at simple tokio redis example (mini redis), we can see how the data is parsed. look at this</p>
<p>the resp is generally read something like this `+abc\r\n'</p>
<p>this is the code that actually crop down the buffer</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn get_line&lt;'a&gt;(src: &amp;mut Cursor&lt;&amp;'a [u8]&gt;) -&gt; Result&lt;&amp;'a [u8], Error&gt; {
    // Scan the bytes directly
    let start = src.position() as usize;
    // Scan to the second to last byte
    let end = src.get_ref().len() - 1;

    for i in start..end {
        if src.get_ref()[i] == b'\r' &amp;&amp; src.get_ref()[i + 1] == b'\n' {
            // We found a line, update the position to be *after* the \n
            src.set_position((i + 2) as u64);

            // Return the line
            return Ok(&amp;src.get_ref()[start..i]);
        }
    }

    Err(Error::Incomplete)
}
<span class="boring">}</span></code></pre></pre>
<p>and I will show you how they works (algorithm)</p>
<h1 id="variables-setup"><a class="header" href="#variables-setup">variables setup</a></h1>
<p>we have <code>start</code> and <code>end</code>, which consist of</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let start = src.position() as usize;
let end = src.get_ref().len() - 1;
<span class="boring">}</span></code></pre></pre>
<p>the <code>src.position()</code> always return 0, also depending on the context. <code>src.get_ref().len()</code> return the length of the buffer, for example, <code>+rand\n\n</code> has length 7.</p>
<p>because we wan't to read two chars at the end, which is \r and \n</p>
<p>so we substract length with 1, <em>this is avoid buffer overflow</em></p>
<p>suppose this situation:
buf: <code>+rand\n\n</code></p>
<p>when we add everything with 1, we got this
idx: <code>012345 6 7</code>, it is idx[7]is found? no, so we need to sub with 1, the idx is something like this
idx: <code>012345 6</code>, no overflow</p>
<p>then we check the <code>i</code> and <code>i + 1</code>, make sure there is \r\n</p>
<h1 id="set-position"><a class="header" href="#set-position">set position</a></h1>
<p>now, we set the cursor to the next incoming buffer. which after \r\n</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>src.set_position((i + 2) as u64);
<span class="boring">}</span></code></pre></pre>
<p>suppose:</p>
<pre><code>+rand\r\n+randomsomething\r\n
012345 6 ^ 
^^   ^   this is i + 2, indicates next buffer
ii+1 orig i
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="postgresql---get-generic-function-signature"><a class="header" href="#postgresql---get-generic-function-signature">postgresql - get() generic function signature</a></h1>
<p>In someday, i found</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[track_caller]
    pub fn get&lt;'a, I, T&gt;(&amp;'a self, idx: I) -&gt; T
    where
        I: RowIndex + fmt::Display,
        T: FromSql&lt;'a&gt;,
    {
        match self.get_inner(&amp;idx) {
            Ok(ok) =&gt; ok,
            Err(err) =&gt; panic!("error retrieving column {}: {}", idx, err),
        }
    }
<span class="boring">}</span></code></pre></pre>
<p>some sort of notes:</p>
<ul>
<li>https://doc.rust-lang.org/rust-by-example/generics.html</li>
<li>https://serokell.io/blog/rust-generics</li>
</ul>
<p>how to call it</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let data2 = data_actual[0].get::&lt;_, i32&gt;(0);
<span class="boring">}</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-build-logging"><a class="header" href="#rust-build-logging">Rust build logging</a></h1>
<p>rust build usually don't show any output if you try to println!() in build.rs, in order to force this, use</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>println!("cargo:warning=start build!");
<span class="boring">}</span></code></pre></pre>
<p>result</p>
<pre><code class="language-txt">warning: ourcrate-rs@0.1.0: Something went wrong!
</code></pre>
<p>all docs: <a href="https://doc.rust-lang.org/cargo/reference/build-scripts.html">https://doc.rust-lang.org/cargo/reference/build-scripts.html</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-tonic-grpc-server-build-process"><a class="header" href="#rust-tonic-grpc-server-build-process">Rust tonic gRPC server build process</a></h1>
<p>topik ini khusus membahas gRPC di rust,</p>
<h2 id="build"><a class="header" href="#build">build</a></h2>
<p>contoh template build rs:</p>
<pre><pre class="playground"><code class="language-rust">use std::{env, path::PathBuf};

fn main() -&gt; Result&lt;(), Box&lt;dyn std::error::Error&gt;&gt; {
    // let out_dir = PathBuf::from(env::var("OUT_DIR").unwrap());
    let out_dir = PathBuf::from(
        "/home/fadhil_riyanto/BALI64/fadev-service-rs/rpc/src/pb".to_string()
    );

    println!("cargo:warning=start build!");
    
    tonic_build::configure()
        .build_server(true)
        .build_client(false)
        .file_descriptor_set_path(out_dir.join("random_service.bin"))
        .compile_protos(
            &amp;["proto/random_service.proto"], 
            &amp;["proto"]
        )?;


    Ok(())
}
</code></pre></pre>
<p>nb:</p>
<ul>
<li><code>file_descriptor_set_path</code>: dipakai sebagai reflection, bakal ketemu kalau pakai grpcurl.</li>
<li><code>build_server</code> dan <code>build_client</code>: disini ada 2 mode build, untuk server atau untuk client. maka kita set server true, client false</li>
<li><code>compile_protos</code>: masing2 berisi 2 param yg menerima slice, param pertama berisi lokasi protobuf, param kedua berisi root foldernya.</li>
</ul>
<p>anda bisa lihat-lihat contoh lain disini: <a href="https://github.com/hyperium/tonic/tree/master/examples">https://github.com/hyperium/tonic/tree/master/examples</a></p>
<p>optional:</p>
<ul>
<li>use <code>.out_dir()</code> ketimbang harus nurut dengan apa yang OUT_DIR katakan</li>
</ul>
<h2 id="out_dir"><a class="header" href="#out_dir">OUT_DIR</a></h2>
<p>what it is, simplenya <code>OUT_DIR</code> ini akan diset jika protobuf sudah di compile, dalam artian, file <code>*.proto</code> diubah jadi kumpulan file <code>*.rs</code> yang bakal di include sama macro, kemudian di compile</p>
<p>urutan compile adalah, macro dievaluasi dulu, baru compile, sampai sini masuk akal. ini macro signature nya</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>#[macro_export]
macro_rules! include_proto {
    ($package: tt) =&gt; {
        include!(concat!(env!("OUT_DIR"), concat!("/", $package, ".rs")));
    };
}
<span class="boring">}</span></code></pre></pre>
<p>tambahan info bisa baca2 sendiri disini: <a href="https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts">https://doc.rust-lang.org/cargo/reference/environment-variables.html#environment-variables-cargo-sets-for-build-scripts</a>, dan jg biasanya ini akan diinclude ke sebuah file handler. kira kira seperti itu</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rust-tokio-postgres-connection-config-example"><a class="header" href="#rust-tokio-postgres-connection-config-example">Rust tokio-postgres connection config example</a></h1>
<p>first, this is example from the documentation</p>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span> let (client, conn_ctx) = tokio_postgres::connect("host=localhost user=postgres", NoTls);
<span class="boring">}</span></code></pre></pre>
<p>then, we want to convert it into config like ctx. <a href="https://docs.rs/postgres/latest/postgres/config/struct.Config.html">see this</a></p>
<pre><pre class="playground"><code class="language-rust">use tokio_postgres::{NoTls, Error};

#[tokio::main]
async fn main() {
        let mut config = postgres::config::Config::new();
        config.host("localhost");
        config.user("fadhil_riyanto");
        config.password("1921684338");

        let client_ret = config.connect(NoTls);


}</code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="math"><a class="header" href="#math">Math</a></h1>
<p>Welcome in this section.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-operations-formula"><a class="header" href="#set-operations-formula">Set operations formula</a></h1>
<h3 id="union-of-two-sets-cardinality"><a class="header" href="#union-of-two-sets-cardinality">Union of Two Sets (cardinality)</a></h3>
<p>\[
|A \cup B| = |A| + |B| - |A \cap B|
\]</p>
<p>how to read:
whole <code>A</code> and <code>B</code> add together, its make a data duplication on center of venn diagram, we remove that duplication using \( |A \cap B|  \)</p>
<h3 id="intersection-steps"><a class="header" href="#intersection-steps">Intersection (steps)</a></h3>
<p>its flip of Union
\[ |A \cup B| = |A| + |B| - |A \cap B| \]
\[ |A \cap B| = |A| + |B| - |A \cup B| \]</p>
<h3 id="intersection-of-three-sets"><a class="header" href="#intersection-of-three-sets">Intersection of three sets</a></h3>
<p>\[ |A \cup B \cup C| = |A| + |B| + |C| - |A \cap B| - |A \cap C| - |B \cap C| + |A \cap B \cap C| \]</p>
<p>how it works, de remove data duplication two times on \( |A \cap B| \), \( |B \cap C| \), and \( |B \cap C| \), then fill the empty section on the center which \( |A \cap B \cap C| \)</p>
<p>This is proof of concept by nice guy on internet: <a href="https://www.youtube.com/watch?v=vVZwe3TCJT8">https://www.youtube.com/watch?v=vVZwe3TCJT8</a>.</p>
<h3 id="difference"><a class="header" href="#difference">Difference</a></h3>
<p>\[ |A - B| = |A| - |A \cup B| \]</p>
<h3 id="symetric-difference"><a class="header" href="#symetric-difference">Symetric difference</a></h3>
<h4 id="1-general-formula"><a class="header" href="#1-general-formula">1. General formula</a></h4>
<p>\[
A \space \triangle \space B = (A \cup B) - (A \cap B)
\]
Cardinals version:
\[
| A \space \triangle \space B | = |A - B| + |B - A|
\]
\[
| A \space \triangle \space B | = |A| + |B| - 2|A \cap B|
\]</p>
<h4 id="2-symetric-difference-properties"><a class="header" href="#2-symetric-difference-properties">2. Symetric difference properties</a></h4>
<ul>
<li>
<p>\(
A \space \triangle \space B  =  B \space \triangle \space A
\)</p>
</li>
<li>
<p>\(
(A \space \triangle \space B) \space \triangle C  =  A \space \triangle \space (B \space \triangle C)
\)</p>
</li>
<li>
<p>\(
(A \space \triangle \space \emptyset) =  A
\), why?</p>
<ul>
<li>\(A \space \triangle \space B = (A \cup B) - (B \cap A) \)</li>
<li>\(A \space \triangle \space \emptyset = (A \cup \emptyset) - (\emptyset \cap A) \), but</li>
<li>\( (A \cup \emptyset) = A \) and \( (\emptyset \cap A) = \emptyset \)</li>
<li>\( (A - \emptyset) = A \)</li>
</ul>
</li>
<li>
<p>\(
(A \space \triangle \space A) =  \emptyset
\)</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="set-stuff"><a class="header" href="#set-stuff">Set stuff</a></h1>
<p>there is some intresting question about discrete math</p>
<h2 id="why--mathcalpemptyset--lbrace-emptyset-rbrace-"><a class="header" href="#why--mathcalpemptyset--lbrace-emptyset-rbrace-">why \( \mathcal{P}(\emptyset) = \lbrace \emptyset \rbrace \)</a></h2>
<p>consider \( \mathcal(S) \) where \( S \) is a set, for example</p>
<ul>
<li>if \( S = \lbrace a \rbrace \), then \( \mathcal{P}(S) = \lbrace \emptyset, \lbrace a \rbrace \rbrace \), same as \( \mathcal{P}(a) \)</li>
<li>if \( S = \lbrace a, b \rbrace \), then \(
\mathcal{P}(S) = \lbrace
\emptyset,
\lbrace a \rbrace,
\lbrace b \rbrace,
\lbrace a, b \rbrace
\rbrace \), same as \( \mathcal{P}(a, b) \)</li>
<li>if \( S = \lbrace \emptyset \rbrace \), then \( \mathcal{P}(S) = \lbrace \emptyset, \lbrace \emptyset \rbrace \rbrace \), same as \( \mathcal{P}(\emptyset) \)</li>
</ul>
<p>so, because \( \lbrace \rbrace \) usually hidden, \( \mathcal{P}(\emptyset) = \lbrace \emptyset \rbrace \)</p>
<h2 id="let--a--emptyset-b--emptyset--how-to--a-times-b-"><a class="header" href="#let--a--emptyset-b--emptyset--how-to--a-times-b-">let \( A = \emptyset, B = \emptyset \), how to \( A \times B \)</a></h2>
<p>Consider \( A \times B = \lbrace (a,b) | a \in A, b \in B \rbrace \)</p>
<p>because</p>
<ul>
<li>A is empty, no elements can be paired</li>
<li>B is also empty</li>
</ul>
<p>conlusion: no paired element = empty</p>
<p>proof by cardinality
\(
|A| = 0, |B| = 0, \text{so, when } |A \times B| = |A| \times |B| = 0 \times 0 = 0
\)</p>
<h2 id="does--pemptyset--lbrace-lbrace-rbrace-rbrace--lbrace-emptyset-rbrace--"><a class="header" href="#does--pemptyset--lbrace-lbrace-rbrace-rbrace--lbrace-emptyset-rbrace--">does \( P(\emptyset) = \lbrace \lbrace \rbrace \rbrace = \lbrace \emptyset \rbrace \) ?</a></h2>
<p>true, this is due \( \lbrace \emptyset \rbrace \) same as \( \lbrace \lbrace \rbrace \rbrace \), then consider example
\( P(a) = \lbrace \lbrace \rbrace, \lbrace a \rbrace\rbrace \)</p>
<h2 id="suppose-x-and-z-are-independent-of-each-other"><a class="header" href="#suppose-x-and-z-are-independent-of-each-other">Suppose X and Z are independent of each other</a></h2>
<ul>
<li>\( | \mathcal{P}(X \cap Z)| \)</li>
<li>\( | X - Z | \)</li>
<li>\( | X \oplus Z | \)</li>
<li>\( | X \cap Z | \)</li>
<li>\( | \mathcal{P}(X) \cup \mathcal{P}(Z)| \)</li>
<li>\( | \overline{\mathcal{P}(X) \cup \mathcal{P}(Z)}| \)</li>
</ul>
<p>nb: bagian ini belum jadi</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logika"><a class="header" href="#logika">Logika</a></h1>
<p>Ringkasan ini dibuat sebagian sebagian dari Kuliah IF1220 Matematika Diskrit ITB oleh bapak Rinaldi Munir. dan berbagai sumber seperti Wikipedia, ChatGPT dsb</p>
<h2 id="proposisi"><a class="header" href="#proposisi">Proposisi</a></h2>
<p>adalah pernyataan bahwa suatu dua perbandingan adalah sama besar, contoh</p>
<ul>
<li>\( \frac{a}{b}=\frac{c}{d} \)</li>
<li>\( 4 = 2 * 2 \)</li>
<li>13 adalah bilangan ganjil</li>
<li>Untuk sembarang bilangan bulat \( n &gt;= 0 \), maka \( 2n \) adalah genap</li>
</ul>
<p>contoh yang bukan</p>
<ul>
<li>Isilah gelas tersebut dengan air</li>
<li>\( x + 3 = 8 \)</li>
<li>\( x &gt; 3 \)</li>
</ul>
<p>dan, Proposisi dilambangkan dengan huruf kecil seperti \( p, q, r, ... \)</p>
<h2 id="bentuk-bentuk-nya"><a class="header" href="#bentuk-bentuk-nya">Bentuk bentuk nya</a></h2>
<ul>
<li>Proposisi atomik
bentuk proposisi tunggal, contoh
<ul>
<li>2n selalu genap untuk n=0, 1, 2, …</li>
<li>Ibukota Maluku Utara adalah Ternate</li>
</ul>
</li>
<li>proposisi majemuk
diantaranya:
<ul>
<li>conjunction (and): \( \wedge \)</li>
<li>disjunction (or): \( \vee \)</li>
<li>negation (!n): \( ~ \)</li>
<li>exclusive disjunction (xor): \( \oplus \)</li>
</ul>
</li>
</ul>
<h2 id="table"><a class="header" href="#table">Table</a></h2>
<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>p</th>
    <th>q</th>
    <th>r</th>
    <th>p ∧ q</th>
    <th>¬q</th>
    <th>¬q ∧ r</th>
    <th>(p ∧ q) ∨ (¬q ∧ r)</th>
  </tr>
  <tr>
    <td>T</td>
    <td>T</td>
    <td>T</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
    <td>T</td>
  </tr>
  <tr>
    <td>T</td>
    <td>T</td>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
    <td>T</td>
  </tr>
  <tr>
    <td>T</td>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>T</td>
    <td>T</td>
    <td>T</td>
  </tr>
  <tr>
    <td>T</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
  </tr>
  <tr>
    <td>F</td>
    <td>T</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
  </tr>
  <tr>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
  </tr>
  <tr>
    <td>F</td>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>T</td>
    <td>T</td>
    <td>T</td>
  </tr>
  <tr>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>F</td>
    <td>T</td>
    <td>F</td>
    <td>F</td>
  </tr>
</table>
<p>nb:</p>
<ul>
<li>Tautologi adalah pernyataan logika yang selalu benar, tidak peduli nilai kebenaran dari komponen-komponennya. contoh</li>
</ul>
<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>p</th>
    <th>q</th>
    <th>p ∧ q</th>
    <th>¬(p ∧ q)</th>
    <th>p ∨ ¬(p ∧ q)</th>
  </tr>
  <tr>
    <td>T</td><td>T</td><td>T</td><td>F</td><td><span style="color:red;">T</span></td>
  </tr>
  <tr>
    <td>T</td><td>F</td><td>F</td><td>T</td><td><span style="color:red;">T</span></td>
  </tr>
  <tr>
    <td>F</td><td>T</td><td>F</td><td>T</td><td><span style="color:red;">T</span></td>
  </tr>
  <tr>
    <td>F</td><td>F</td><td>F</td><td>T</td><td><span style="color:red;">T</span></td>
  </tr>
</table>
<ul>
<li>Kontradiksi adalah pernyataan logika yang selalu salah, tidak peduli nilai kebenaran dari komponen-komponennya. contoh</li>
</ul>
<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>p</th>
    <th>q</th>
    <th>p ∧ q</th>
    <th>p ∨ q</th>
    <th>¬(p ∨ q)</th>
    <th>(p ∧ q) ∧ ¬(p ∨ q)</th>
  </tr>
  <tr>
    <td>T</td><td>T</td><td>T</td><td>T</td><td>F</td><td><span style="color:red;">F</span></td>
  </tr>
  <tr>
    <td>T</td><td>F</td><td>F</td><td>T</td><td>F</td><td><span style="color:red;">F</span></td>
  </tr>
  <tr>
    <td>F</td><td>T</td><td>F</td><td>T</td><td>F</td><td><span style="color:red;">F</span></td>
  </tr>
  <tr>
    <td>F</td><td>F</td><td>F</td><td>F</td><td>T</td><td><span style="color:red;">F</span></td>
  </tr>
</table>
- ekivalen
Intinya, jika dioperasikan, dia punya hasil tabel kebenaran yang identik, walau rumusnya beda.
<p><img src="https://upload.wikimedia.org/wikipedia/commons/8/83/In_Quest_of_Univeral_Logic_Morgan.png" alt="gambar wikipedia hukum de morgan" /></p>
<table border="1" cellspacing="0" cellpadding="5">
  <tr>
    <th>p</th>
    <th>q</th>
    <th>p ∧ q</th>
    <th>¬(p ∧ q)</th>
    <th>¬p</th>
    <th>¬q</th>
    <th>¬p ∨ ¬q</th>
  </tr>
  <tr>
    <td>T</td><td>T</td><td>T</td><td><span style="color:red;">F</span></td><td>F</td><td>F</td><td><span style="color:red;">F</span></td>
  </tr>
  <tr>
    <td>T</td><td>F</td><td>F</td><td><span style="color:red;">T</span></td><td>F</td><td>T</td><td><span style="color:red;">T</span></td>
  </tr>
  <tr>
    <td>F</td><td>T</td><td>F</td><td><span style="color:red;">T</span></td><td>T</td><td>F</td><td><span style="color:red;">T</span></td>
  </tr>
  <tr>
    <td>F</td><td>F</td><td>F</td><td><span style="color:red;">T</span></td><td>T</td><td>T</td><td><span style="color:red;">T</span></td>
  </tr>
</table>
<h2 id="hukum-hukum-nya"><a class="header" href="#hukum-hukum-nya">Hukum hukum nya</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Bahasa Indonesia</th><th>Bahasa Inggris</th><th>Contoh</th></tr></thead><tbody>
<tr><td>Hukum Identitas</td><td>Identity Law</td><td><code>p ∧ T ≡ p</code>, <code>p ∨ F ≡ p</code></td></tr>
<tr><td>Hukum Dominasi</td><td>Domination Law</td><td><code>p ∨ T ≡ T</code>, <code>p ∧ F ≡ F</code></td></tr>
<tr><td>Hukum Idempotensi</td><td>Idempotent Law</td><td><code>p ∨ p ≡ p</code>, <code>p ∧ p ≡ p</code></td></tr>
<tr><td>Hukum Negasi</td><td>Negation Law</td><td><code>p ∨ ¬p ≡ T</code>, <code>p ∧ ¬p ≡ F</code></td></tr>
<tr><td>Hukum Komutatif</td><td>Commutative Law</td><td><code>p ∨ q ≡ q ∨ p</code>, <code>p ∧ q ≡ q ∧ p</code></td></tr>
<tr><td>Hukum Asosiatif</td><td>Associative Law</td><td><code>(p ∨ q) ∨ r ≡ p ∨ (q ∨ r)</code></td></tr>
<tr><td>Hukum Distributif</td><td>Distributive Law</td><td><code>p ∨ (q ∧ r) ≡ (p ∨ q) ∧ (p ∨ r)</code></td></tr>
<tr><td>Hukum De Morgan</td><td>De Morgan’s Laws</td><td><code>¬(p ∧ q) ≡ ¬p ∨ ¬q</code>, <code>¬(p ∨ q) ≡ ¬p ∧ ¬q</code></td></tr>
<tr><td>Hukum Involusi</td><td>Double Negation / Involution</td><td><code>¬(¬p) ≡ p</code></td></tr>
<tr><td>Hukum Implikasi</td><td>Implication Law</td><td><code>p → q ≡ ¬p ∨ q</code></td></tr>
<tr><td>Hukum Biimplikasi</td><td>Biconditional Law</td><td><code>p ↔ q ≡ (p → q) ∧ (q → p)</code></td></tr>
</tbody></table>
</div>
<h2 id="implikasi"><a class="header" href="#implikasi">Implikasi</a></h2>
<p>Disebut juga proposisi bersyarat, seperti jika x maka y, notasinya \( p \rightarrow q\). \( p \) nya adalah condition, \( q \) nya adalah conlusion</p>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q</th><th>p → q</th></tr></thead><tbody>
<tr><td>T</td><td>T</td><td>T</td></tr>
<tr><td>T</td><td>F</td><td>F</td></tr>
<tr><td>F</td><td>T</td><td>T</td></tr>
<tr><td>F</td><td>F</td><td>T</td></tr>
</tbody></table>
</div>
<p>versi versinya jika dijadikan teks</p>
<ul>
<li>Jika p, maka q (if p, then q)</li>
<li>Jika p, q (if p, q)</li>
<li>p mengakibatkan q (p implies q)</li>
<li>q jika p (q if p)</li>
<li>p hanya jika q (p only if q)</li>
<li>p syarat cukup untuk q (p is sufficient condition for q)</li>
<li>q syarat perlu bagi p (q is necessary condition for q)</li>
<li>q bilamana p (q whenever p)</li>
<li>q mengikuti dari p (q follows from p)</li>
</ul>
<h3 id="penjelasan-kenapa--f-rightarrow-f--t-"><a class="header" href="#penjelasan-kenapa--f-rightarrow-f--t-">penjelasan kenapa \( F \rightarrow F = T \)</a></h3>
<pre><code>“If I win the lottery, I’ll buy you a car.”
I didn't win the lottery → (False)

I didn't buy a car → (False)
</code></pre>
<p>dan juga \( P \rightarrow Q \) sebenarnya sama dengan \( \sim{P} \vee Q \)</p>
<h3 id="penjelasan-kenapa--sim-p-rightarrow-q--itu-sama-dengan--p-space-wedge-simq-"><a class="header" href="#penjelasan-kenapa--sim-p-rightarrow-q--itu-sama-dengan--p-space-wedge-simq-">Penjelasan kenapa \( \sim (p \rightarrow q )\) itu sama dengan \( p \space \wedge \sim{q} \)</a></h3>
<p>Kita tahu bahwa \( p \rightarrow q \) itu sebenarnya sama dengan \( \sim{p} \vee p \) , maka steps yang dibutuhkan hanya</p>
<ul>
<li>\( \sim(p \rightarrow q) \)</li>
<li>\( \sim(\sim{p} \vee q) \)</li>
<li>\( p \space \wedge \sim{q} \)</li>
</ul>
<h3 id="tabel-varian-implikasi-proporsi-bersyarat"><a class="header" href="#tabel-varian-implikasi-proporsi-bersyarat">tabel varian implikasi (Proporsi bersyarat)</a></h3>
<ul>
<li>Konvers (kebalikan): \( q \rightarrow p \)</li>
<li>Invers : \( \sim p \rightarrow \sim q \)</li>
<li>Kontraposisi : \( \sim q \rightarrow \sim p \)</li>
</ul>
<div class="table-wrapper"><table><thead><tr><th>p</th><th>q</th><th>¬p</th><th>¬q</th><th>p → q</th><th>q → p</th><th>¬p → ¬q</th><th>¬q → ¬p</th></tr></thead><tbody>
<tr><td>T</td><td>T</td><td>F</td><td>F</td><td>T</td><td>T</td><td>T</td><td>T</td></tr>
<tr><td>T</td><td>F</td><td>F</td><td>T</td><td>F</td><td>T</td><td>T</td><td>F</td></tr>
<tr><td>F</td><td>T</td><td>T</td><td>F</td><td>T</td><td>F</td><td>F</td><td>T</td></tr>
<tr><td>F</td><td>F</td><td>T</td><td>T</td><td>T</td><td>T</td><td>T</td><td>T</td></tr>
</tbody></table>
</div>
<h2 id="bi-impication"><a class="header" href="#bi-impication">Bi-impication</a></h2>
<p>Intinya, operand kanan kiri harus sama, entah sama sama true, atau sama sama false.
notasinya: \( p \leftrightarrow q \)</p>
<p>tabel kebenaran</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">p</th><th style="text-align: center">q</th><th style="text-align: center">p ↔ q</th></tr></thead><tbody>
<tr><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td></tr>
<tr><td style="text-align: center">T</td><td style="text-align: center">F</td><td style="text-align: center">F</td></tr>
<tr><td style="text-align: center">F</td><td style="text-align: center">T</td><td style="text-align: center">F</td></tr>
<tr><td style="text-align: center">F</td><td style="text-align: center">F</td><td style="text-align: center">T</td></tr>
</tbody></table>
</div>
<p>contoh</p>
<div class="table-wrapper"><table><thead><tr><th style="text-align: center">p</th><th style="text-align: center">q</th><th style="text-align: center">p ↔ q</th><th style="text-align: center">p → q</th><th style="text-align: center">q → p</th><th style="text-align: center">(p → q) ∧ (q → p)</th></tr></thead><tbody>
<tr><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td></tr>
<tr><td style="text-align: center">T</td><td style="text-align: center">F</td><td style="text-align: center">F</td><td style="text-align: center">F</td><td style="text-align: center">T</td><td style="text-align: center">F</td></tr>
<tr><td style="text-align: center">F</td><td style="text-align: center">T</td><td style="text-align: center">F</td><td style="text-align: center">T</td><td style="text-align: center">F</td><td style="text-align: center">F</td></tr>
<tr><td style="text-align: center">F</td><td style="text-align: center">F</td><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td><td style="text-align: center">T</td></tr>
</tbody></table>
</div>
<p>analogi simple:</p>
<ul>
<li>
<p><code>Jika suatu bilangan genap, maka habis dibagi 2</code>: \( \text{true} \leftrightarrow \text{true} = \text{true} \)</p>
</li>
<li>
<p><code>Jika suatu bilangan bukan genap, maka tidak akan habis dibagi 2</code>: \( \text{false} \leftrightarrow \text{false} = \text{true} \)</p>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="kumpulan-soal-matematika-diskrit"><a class="header" href="#kumpulan-soal-matematika-diskrit">kumpulan soal Matematika Diskrit</a></h1>
<h2 id="no-1"><a class="header" href="#no-1">No. 1</a></h2>
<p>Dalam sebuah survei terhadap 120 orang, diperoleh data sebagai berikut:</p>
<ul>
<li>65 orang suka kopi</li>
<li>70 orang suka teh</li>
<li>50 orang suka cokelat</li>
<li>30 orang suka kopi dan teh</li>
<li>28 orang suka kopi dan cokelat</li>
<li>26 orang suka teh dan cokelat</li>
<li>15 orang suka semua minuman</li>
<li>Semua orang minimal menyukai satu jenis minuman</li>
</ul>
<p>Tentukan:</p>
<ol>
<li>Banyak orang yang hanya suka kopi</li>
<li>Banyak orang yang suka teh dan cokelat, tapi tidak suka kopi</li>
<li>Banyak orang yang suka tepat dua jenis minuman</li>
<li>Banyak orang yang hanya suka satu jenis minuman</li>
</ol>
<h2 id="no-2"><a class="header" href="#no-2">No. 2</a></h2>
<p>Jika diketahui</p>
<ul>
<li>S = {1,2,3 …, 15},</li>
<li>A = { 2,3,5,7},</li>
<li>B = { 1,3,5,7,9},</li>
<li>C = {2,4,6,8}</li>
</ul>
<p>Tentukan :</p>
<ol>
<li>A ∪ B ∪ C</li>
<li>A ∩ C</li>
<li>B - A</li>
<li>(A’ ∩ B) - C</li>
<li>(B - C) ∩ A’</li>
</ol>
<h2 id="no-3"><a class="header" href="#no-3">No. 3</a></h2>
<p>Dalam survei terhadap 80 mahasiswa, diperoleh data:</p>
<ul>
<li>45 mahasiswa suka Matematika</li>
<li>38 mahasiswa suka Fisika</li>
<li>40 mahasiswa suka Kimia</li>
<li>20 mahasiswa suka Matematika dan Fisika</li>
<li>25 mahasiswa suka Fisika dan Kimia</li>
<li>18 mahasiswa suka Matematika dan Kimia</li>
<li>10 mahasiswa suka ketiga mata kuliah</li>
<li>8 mahasiswa tidak suka semua mata kuliah</li>
</ul>
<p>tentukan</p>
<ol>
<li>Banyak mahasiswa yang suka hanya Matematika</li>
<li>Banyak mahasiswa yang suka tepat dua mata kuliah</li>
<li>Banyak mahasiswa yang suka Matematika atau Kimia tapi tidak Fisika</li>
<li>Banyak mahasiswa yang suka hanya satu mata kuliah</li>
</ol>
<div class='warning'>
	Catatan
<pre><code>format latex menyusul
</code></pre>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="asal-usul-rumus-sudut-vektor"><a class="header" href="#asal-usul-rumus-sudut-vektor">asal usul rumus sudut vektor</a></h1>
<p>awal mula dari rumus entah berantah ini. link untuk oprek rumus: <a href="https://proofwiki.org/wiki/Cosine_Formula_for_Dot_Product">https://proofwiki.org/wiki/Cosine_Formula_for_Dot_Product</a></p>
<p>\[ \vec{A} \cdot \vec{B} =  |\vec{A}| |\vec{B}| cos(\theta) \]</p>
<p>lalu
\[ \frac{\vec{A} \cdot \vec{B}}{|\vec{A}| |\vec{B}|} =   cos(\theta) \]</p>
<p>lalu kita bisa balik, menjadi
\[ cos(\theta) = \frac{\vec{A} \cdot \vec{B}}{|\vec{A}| |\vec{B}|} \]</p>
<p>\[ arccos(\frac{\vec{A} \cdot \vec{B}}{|\vec{A}| |\vec{B}|}) = \theta \]</p>
<p>solved!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="transformasi-elementer"><a class="header" href="#transformasi-elementer">transformasi elementer</a></h1>
<p>beberapa notasi aneh disini diderive dari PPT kampus.</p>
<ul>
<li>\( H_{ij}A \): Swap baris i dengan baris j</li>
<li>\( H_i^{(k)} \): mengalikan baris i dengan konstanta k</li>
<li>\( H_{ij}^{(k)} \): hitung dulu konstanta k dikali baris j, lalu hasilnya ditambah baris i, simpan jg hasilnya ke baris i</li>
<li>\( H_{i \space \space \space \space \space \space \space j}^{\space \space (k) \space \space \space (z)}(A)_i \): intinya, baris ke i dikalikan dgn k, kalau udah lanjut hitung baris j dikalikan z. setelah itu hasilnya tentusaja simpan ke i hasil itung2 an tadi.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cryptography"><a class="header" href="#cryptography">Cryptography</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="alur-konek-ke-rpc-server-telegram"><a class="header" href="#alur-konek-ke-rpc-server-telegram">Alur konek ke RPC server telegram</a></h1>
<p>step ini dibuat oleh seseorang dari masa lalu sekitar tahun 2020 yang akunnya telah terhapus, credit kepada Butthx</p>
<p>`originals written in telegram chat, but because I want to preserve it. I write it here</p>
<h2 id="step-1"><a class="header" href="#step-1">step 1:</a></h2>
<p>Bikin koneksi ke server telegram pakai TCP yang tersedia (disini gwa pakai TCPIntermediate)</p>
<h2 id="step-2"><a class="header" href="#step-2">step 2:</a></h2>
<p>Bikin random nonce dengan value int128</p>
<h2 id="step-3"><a class="header" href="#step-3">step 3:</a></h2>
<p>Kirim bytes dari ReqPqMulti dengan value bytes dari nonce tadi.</p>
<h2 id="step-4"><a class="header" href="#step-4">step 4:</a></h2>
<p>pick salah satu dari beberapa publick fingerprints yang diberikan dari results step3.</p>
<h2 id="step-5"><a class="header" href="#step-5">step 5:</a></h2>
<p>Lakuin faktor bilangan pq yang diberikan dari results step3, dapetin lagi hasil pembagian dari pq tadi dengan hasil faktor, terus urutkan dari yang terkecil. untuk yang kecil di kasih nama p dan yang besar kasih nama g.</p>
<h2 id="step-6"><a class="header" href="#step-6">step 6:</a></h2>
<p>bikin nonce baru (jangan ubah nonce yang lama) dengan value random int256.</p>
<h2 id="step-7"><a class="header" href="#step-7">step 7:</a></h2>
<p>bikin hash (sha1) dari bytes PQInnerData ke telegram: bytes[pq,bytes p,bytes q,nonce,nonce baru,server nonce (dapet dari step3)]</p>
<h2 id="step-8"><a class="header" href="#step-8">step 8:</a></h2>
<p>bikin padding dengan random bytes dengan panjang -(length bytes PQInnerData + length sha1) mod 255</p>
<h2 id="step-9"><a class="header" href="#step-9">step 9:</a></h2>
<p>encrypt bytes[sha,bytes PQInnerData,padding] dengan RSA (pakai publik fingerprints tadi)</p>
<h2 id="step-10"><a class="header" href="#step-10">step 10:</a></h2>
<p>kirim bytes ReqDhParams: bytes[nonce,server nonce, bytes p, bytes q, encrypted data (step9) ,fingerprint]</p>
<h2 id="step-11"><a class="header" href="#step-11">step 11:</a></h2>
<p>bikin temporary aes key: bytes[sha1[bytes nonce baru, bytes server nonce],sha1[bytes server nonce, bytes nonce baru] slice 0 – 12]</p>
<h2 id="step-12"><a class="header" href="#step-12">step 12:</a></h2>
<p>bikin temporary aes initial vector (IV): bytes[sha1[bytes server nonce, bytes nonce baru] slice 12 – end, sha1[bytes nonce baru,bytes nonce baru], bytes[nonce baru] slice 0 – 4 ]</p>
<h2 id="step-13"><a class="header" href="#step-13">step 13:</a></h2>
<p>decrypt encryptedAnswer (dapet dari step 10) menggunakan AES-256-IGE pakai key sama iv tadi.</p>
<h2 id="step-14"><a class="header" href="#step-14">step 14:</a></h2>
<p>parse decrypted answer tadi ke TLSchema/TLObject</p>
<h2 id="step-15"><a class="header" href="#step-15">step 15:</a></h2>
<p>bikin random int(panjang 256 bytes, bukan int256 ygy) kita beri nama b</p>
<h2 id="step-16"><a class="header" href="#step-16">step 16:</a></h2>
<p>dapetin g_b dengan (g ** b) mod dh_prime</p>
<ul>
<li>g, dh_prime → dapet dari step 14</li>
</ul>
<h2 id="step-17"><a class="header" href="#step-17">step 17:</a></h2>
<p>bikin hash sha1 dari bytes[ClientDhInnerData[nonce, server nonce, 0,unsigned big bytes g_b length 256]]</p>
<h2 id="step-18"><a class="header" href="#step-18">step 18:</a></h2>
<p>bikin padding dengan length -(length bytes ClientDhInnerData + length sha1) mod 16</p>
<h2 id="step-19"><a class="header" href="#step-19">step 19:</a></h2>
<p>encrypt bytes[bytes step 17,bytes ClientDhInnerData, padding ] dengan AES-256-IGE, key sama iv masih menggunakan yang step 11.</p>
<h2 id="step-20"><a class="header" href="#step-20">step 20:</a></h2>
<p>kirim bytes[SetClientDhParams[nonce, server nonce, bytes step 19]]</p>
<h2 id="step-21"><a class="header" href="#step-21">step 21:</a></h2>
<p>Bikin auth key dengan big-unsigned-bytes[big-u-int(g_a) ** b mod dhPrime] length 256</p>
<h2 id="step-22"><a class="header" href="#step-22">step 22:</a></h2>
<p>Lakuin security check..</p>
<p>notes:
Untuk format pengiriman bytes:</p>
<pre><code class="language-txt">bytes[sessionId,messageId,length content,content]
karena belum ada authkey, jadi sessionId  = Buffer.alloc(8)
</code></pre>
<p>untuk dapetin real data dari telegram, slice bytes yang di terima dari 20 – end</p>
<p>pengiriman content selalu bentuk bytes, jadi semua parameter jadiin bytes :)</p>
<pre><code class="language-ts">/**
 * tgsnake - Telegram MTProto framework for nodejs.
 * Copyright (C) 2022 butthx &lt;https://github.com/butthx&gt;
 *
 * THIS FILE IS PART OF TGSNAKE
 *
 * tgsnake is a free software : you can redistribute it and/or modify
 * it under the terms of the MIT License as published.
 */

export const DCTest = {
  1: '149.154.175.10',
  2: '149.154.167.40',
  3: '149.154.175.117',
};
export const DCProd = {
  1: '149.154.175.53',
  2: '149.154.167.51',
  3: '149.154.175.100',
  4: '149.154.167.91',
  5: '91.108.56.130',
};
export const DCProdMedia = {
  2: '149.154.167.151',
  4: '149.154.164.250',
};
export const DCTestIPV6 = {
  1: '2001:b28:f23d:f001::e',
  2: '2001:67c:4e8:f002::e',
  3: '2001:b28:f23d:f003::e',
};
export const DCProdIPV6 = {
  1: '2001:b28:f23d:f001::a',
  2: '2001:67c:4e8:f002::a',
  3: '2001:b28:f23d:f003::a',
  4: '2001:67c:4e8:f004::a',
  5: '2001:b28:f23f:f005::a',
};
export const DCProdMediaIPV6 = {
  2: '2001:067c:04e8:f002:0000:0000:0000:000b',
  4: '2001:067c:04e8:f004:0000:0000:0000:000b',
};
export function DataCenter(
  dcId: number,
  testMode: boolean,
  ipv6: boolean,
  media: boolean
): [ip: string, port: number] {
  if (testMode) {
    return [ipv6 ? DCTestIPV6[dcId] : DCTest[dcId], 80];
  } else {
    if (media) {
      return [ipv6 ? DCProdMediaIPV6[dcId] : DCProdMedia[dcId], 443];
    } else {
      return [ipv6 ? DCProdIPV6[dcId] : DCProd[dcId], 443];
    }
  }
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="server"><a class="header" href="#server">Server</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="cgit-setup"><a class="header" href="#cgit-setup">Cgit setup</a></h1>
<p>Ku mau share pengalaman bikin self hosting git server, pakai cgit, biar engga kalah aja sama git.kernel.org dan kernel.dk wkwk</p>
<p>step satu, include dir nya sites-available spt biasa, contoh config nya
https://gist.github.com/fadhil-riyanto/328f2cc0607eb58b713cdeaa473d08ee, lalu config untuk sites-available nya
https://gist.github.com/fadhil-riyanto/c2e26de30c97600e4ee9342aefbd6ece</p>
<p>nb: install fcgiwrap dulu</p>
<p>lalu edit /etc/cgitrc, contoh config: https://gist.github.com/fadhil-riyanto/4033e6ce59a35568c31dbd5e5a1d29bd</p>
<p>harusnya sampai sini, cgit dah bisa diakses, cuman empty repository aja.</p>
<p>ok, lalu kita ke permission2 nya, pertama2 pakai akun root, tldr</p>
<pre><code class="language-sh">cd /root
mkdir git
cd git
mkdir user1, misal aja mkdir fadhil_riyanto
cd fadhil_riyanto
</code></pre>
<p>clone git apapun disini, misal
<code>git clone https://github.com/fadhil-riyanto/reponame.git --bare</code> (harus pakai bare)</p>
<p>posisi dir ini di <code>/root/git/fadhil-riyanto/reponame.git</code></p>
<p>ok, balik ke parent dir, posisi di /root/git
lakukan <code>chown -R fadhil_riyanto fadhil-riyanto</code>, jika engga nanti error "git submodule update" failed with 'fatal: detected dubious ownership in repository at...' etc...</p>
<p>ok, saatnya push
<code>git remote add cgit fadhil_riyanto@123.123.111.222:/root/git/fadhil-riyanto/reponame.git</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="config-https-nginx"><a class="header" href="#config-https-nginx">config HTTPS nginx</a></h1>
<p>Cara config HTTPS di server pakai certbot (NGINX)</p>
<ul>
<li>apt install certbot python3-certbot-nginx</li>
<li>verify config na pakai nginx -t</li>
<li>generate cert na pakai certbot --nginx -d namasite.com</li>
</ul>
<p>ganti namasite.com dengan embel2 di /etc/nginx/sites-enabled/somefile.conf</p>
<p>didalamnya kan ada server_name, nah diganti dgn itu</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-virtual-network-interface"><a class="header" href="#setup-virtual-network-interface">Setup virtual network interface</a></h1>
<p>cara setup virtual ethernet + assign ip nya</p>
<ul>
<li><code>sudo ip link add veth0 type dummy</code></li>
</ul>
<p>bisa dicek pakai <code>ip addr</code></p>
<pre><code class="language-txt">[11:11:35] fadhil_riyanto@integral2 /etc/systemd/network  
&gt; ip addr
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host noprefixroute 
       valid_lft forever preferred_lft forever
2: enp2s0: &lt;NO-CARRIER,BROADCAST,MULTICAST,UP&gt; mtu 1500 qdisc fq_codel state DOWN group default qlen 1000
    link/ether 2c:4d:54:c6:f2:0c brd ff:ff:ff:ff:ff:ff
    altname enx2c4d54c6f20c
3: wlan0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UP group default qlen 1000
    link/ether f0:03:8c:66:9c:21 brd ff:ff:ff:ff:ff:ff
    inet 192.168.5.44/24 brd 192.168.5.255 scope global dynamic noprefixroute wlan0
       valid_lft 581sec preferred_lft 581sec
    inet 192.168.5.197/24 metric 1024 brd 192.168.5.255 scope global secondary dynamic wlan0
       valid_lft 582sec preferred_lft 582sec
    inet6 fe80::5574:5771:be47:2f7b/64 scope link noprefixroute 
       valid_lft forever preferred_lft forever
    inet6 fe80::f203:8cff:fe66:9c21/64 scope link proto kernel_ll 
       valid_lft forever preferred_lft forever
4: veth0: &lt;BROADCAST,NOARP,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue state UNKNOWN group default qlen 1000
    link/ether 76:4d:3f:3d:11:7f brd ff:ff:ff:ff:ff:ff
    inet6 fe80::744d:3fff:fe3d:117f/64 scope link proto kernel_ll 
       valid_lft forever preferred_lft forever

</code></pre>
<p>lalu assign ip nya</p>
<ul>
<li><code>sudo ip addr add 192.168.100.10/24 dev veth0</code></li>
<li><code>sudo ip link set veth0 up</code></li>
</ul>
<p>dan bisa diping juga
<img src="server//assets/11bb1cc1160be5425a379843f6c2ccef31b6a80cf13b505d842404bd9e9922d4cda2d7e4f0693c4291743e74c3143e20021494aa95a5d380b1b8e3c8.png" alt="image" /></p>
<p>untuk remove interface nya bisa pakai
<code>sudo ip link delete vnet0</code></p>
<h1 id="some-sorts-of-equalivalent-command"><a class="header" href="#some-sorts-of-equalivalent-command">some sorts of equalivalent command</a></h1>
<ul>
<li>Create bridge: <code>brctl addbr br0</code> <code>ip link add br0 type bridge</code></li>
<li>Delete bridge: <code>brctl delbr br0</code>   ip link delete br0</li>
<li>Add interface to bridge: <code>brctl addif br0 eth0</code> ip link set eth0 master br0</li>
<li>Remove interface from bridge: <code>brctl delif br0 eth0</code> ip link set eth0 nomaster</li>
<li>Show bridge info: <code>brctl show</code> or <code>brctl show br0</code>  <code>bridge link show</code> or <code>ip link show master br0</code></li>
<li>Enable/disable STP: <code>brctl stp br0 on/off</code> <code>bridge link set dev eth0 guard off/on</code> (note: STP enable/disable logic is reversed)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ip-aliasing"><a class="header" href="#ip-aliasing">ip aliasing</a></h1>
<p>satu interface bisa punya lebih dari 1 IP dinamai sebagai IP aliasing. contoh</p>
<p><code>eth0</code> bisa punya 2 ip dengan cara</p>
<ul>
<li><code>ip addr add 192.168.1.100/24 dev eth0</code></li>
<li><code>ip addr add 192.168.1.101/24 dev eth0</code></li>
</ul>
<p>atau bisa juga ada 2 interface, katakanlah <code>eth0</code> dengan <code>eth1</code>, masing2 punya ip nya sendiri2 dengan cara</p>
<pre><code class="language-sh">ip addr add 192.168.1.10/24 dev eth0
ip addr add 10.0.0.5/24 dev eth1
</code></pre>
<h1 id="tambahan"><a class="header" href="#tambahan">tambahan</a></h1>
<p>untuk ngeremove salah satu ip nya, bisa dengan <code>ip addr del &lt;IP NYA&gt;/&lt;CIDR&gt; dev &lt;IFACE&gt;</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-bridge-enp0s16u1"><a class="header" href="#setup-bridge-enp0s16u1">Setup bridge enp0s16u1</a></h1>
<ul>
<li>setup dulu bridgenya pakai <code>ip link add br0 type bridge</code></li>
<li>buat enp0s16u1 sebagai master dari br0, pakai <code>ip link set enp0s16u1 master br0</code>
<ul>
<li>catatan, wlan0 tidak bisa di add. <a href="https://bbs.archlinux.org/viewtopic.php?id=264651">https://bbs.archlinux.org/viewtopic.php?id=264651</a>, <a href="https://wiki.archlinux.org/title/Network_bridge#Wireless_interface_on_a_bridge">https://wiki.archlinux.org/title/Network_bridge#Wireless_interface_on_a_bridge</a></li>
</ul>
</li>
<li>lalu enable semua interface nya
<ul>
<li><code>sudo ip link set dev enp0s16u1 up</code></li>
<li><code>sudo ip link set dev br0 up</code></li>
</ul>
</li>
<li>set dhcp <code>sudo dhclient br0</code>
<ul>
<li>nb, ditahap ini, harusnya sudah dapat ip dan bisa ping keluar.</li>
</ul>
</li>
<li>hapus ip bawaan enp0s16u1 dan pakai br0 sebagai default interface pakai <code>sudo ip addr flush dev enp0s16u1</code></li>
</ul>
<p>bisa di test dengan</p>
<ul>
<li>hapus dahulu ip yang tadi diberikan ke br0 pakai <code>sudo dhclient -r br0</code>, pastikan ip nya kosong</li>
<li>lalu hapus ip milik enp0s16u1</li>
<li>test ping</li>
<li>lalu lakukan lagi <code>sudo dhclient br0</code></li>
</ul>
<p><img src="server//assets/1b691564498dc373215573884ca30d7158cea49b44f53d17d2958e9222a4b8222cdfc38a294f0bf4bdfeca36d956e235deb899f3e8ec755f63c0c729.png" alt="image" /></p>
<h1 id="reverse-command"><a class="header" href="#reverse-command">reverse command</a></h1>
<p>Pakai ini untuk in-case ada kesalahan</p>
<h2 id="hapus-ip-br0"><a class="header" href="#hapus-ip-br0">hapus ip br0</a></h2>
<ul>
<li><code>ip addr show br0</code></li>
<li><code>sudo ip addr del 192.168.1.10/24 dev br0</code></li>
</ul>
<p>tambahan, kadang tidak bener2 kehapus karna mungkin NetworkManager, systemd-networkd, dhclient aktif.</p>
<p><img src="server//assets/4de0445fce99e64ac0afd61922742bcf44ea710e3ca4ce1e6f11643aca1002b469648ce176789d7431aa0ff361e570f1eca3c2fa175f401cf0ee121e.png" alt="image" /></p>
<p>nb: untuk dhcp kadang NetworkManager sama systemd-networkd bertabrakan, solusinya stop dahulu pakai</p>
<ul>
<li><code>sudo systemctl stop systemd-networkd.socket</code></li>
<li><code>sudo systemctl stop systemd-networkd</code></li>
</ul>
<h1 id="next-buat-bridge-ke-vm-topologi"><a class="header" href="#next-buat-bridge-ke-vm-topologi">next, buat bridge ke VM. topologi</a></h1>
<pre><code class="language-txt">   [Internet]
       |
     Router
       |
     eth0 (on host) → br0 (bridge)
                      |
    +--------+--------+--------+
    |        |        |        |
  VM1      VM2      VM3      etc.
  ↳ 192.168.12.101   192.168.12.102   ...

</code></pre>
<p>mulai dari sini akan utak atik <code>veth</code></p>
<h1 id="setup-veth-manual"><a class="header" href="#setup-veth-manual">setup veth manual</a></h1>
<ul>
<li><code>sudo ip link add veth0 type veth peer name veth0-peer</code></li>
<li><code>sudo ip link set veth0 master br0</code></li>
<li><code>sudo ip link set veth0 up</code></li>
<li><code>sudo ip link set veth0-peer up</code></li>
<li><code>sudo dhclient veth0-peer</code></li>
</ul>
<p>topologinya kira2 seperti ini</p>
<pre><code class="language-txt">                +---------------------------+
                |        Linux Host         |
                |                           |
                |   +-------------------+   |
                |   |       br0         |   |  ← bridge acting as a virtual switch
                |   +--------+----------+   |
                |            |              |
                |         veth0            ... ← more veths for other containers/VMs
                |            |
                +------------+--------------+
                             |
                             | (virtual cable)
                             |
                         veth0-peer
                             |
                    +------------------+
                    |   Container/VM   |  ← gets its own IP
                    +------------------+

</code></pre>
<h1 id="lanjut-assign-veth-peer-ke-qemu-pakai-tap-device"><a class="header" href="#lanjut-assign-veth-peer-ke-qemu-pakai-tap-device">lanjut assign veth-peer ke qemu (pakai tap device)</a></h1>
<p>topology:</p>
<pre><code class="language-txt">            Linux Host
       +------------------+
       |      br0         |  ← acts as switch
       +--+-----------+---+
          |           |
        eth0         tap0  ← tap device for QEMU VM
                        |
                   QEMU VM

</code></pre>
<p>attach</p>
<pre><code class="language-sh">sudo ip tuntap add dev tap0 mode tap
sudo ip link set tap0 up
sudo ip link set tap0 master br0
</code></pre>
<p>qemu</p>
<pre><code class="language-txt">sudo qemu-system-x86_64 \
  -enable-kvm \
  -m 2048 \
  -hda ubuntu.qcow2 \
  -netdev tap,id=net0,ifname=tap0,script=no,downscript=no \
  -device virtio-net-pci,netdev=net0

</code></pre>
<p>test qemu mikrotik</p>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -boot order=d \
                -drive file=chr.qcow2,format=qcow2 \
                -m 4G \
                -smp 4 \
                -net user,hostfwd=tcp::10022-:22,hostfwd=tcp::8080-:8080 \
                -netdev tap,id=net0,ifname=tap0,script=no,downscript=no \
                -device virtio-net-pci,netdev=net0
</code></pre>
<p>untuk test nya, bisa dengan</p>
<ul>
<li>cek ip mikrotik pakai <code>/ip address print</code></li>
<li>lalu <code> ip netns exec namespace_satu ping &lt;IP NYA&gt;</code></li>
<li>Bisa juga pakai dummy http server php, caranya <code>sudo ip netns exec namespace_satu php -S 192.168.12.82:1234</code> (cek dahulu ip namespace pakai ip addr)</li>
</ul>
<h1 id="contoh-setup-pakai-namespace"><a class="header" href="#contoh-setup-pakai-namespace">contoh setup pakai namespace</a></h1>
<ul>
<li>create dulu pakai <code>sudo ip netns add namespace_satu</code></li>
<li>set <code>sudo ip link set veth0-peer netns namespace_satu</code></li>
<li>cek dahulu, pastikan didalamnnya masih kosong ip nya, pakai <code>sudo ip netns exec namespace_satu ip addr</code>
<img src="server//assets/48984020250811e0f4a6c52d75940e5ba795f025c6ff2d76fbfc4d213bc7593b1555684a602581fa67772570e4708af35395540e36f8ecdf11295255.png" alt="image" /></li>
<li>lalu kita nyalakan veth0-peer nya <code>sudo ip netns exec namespace_satu ip link set dev veth0-peer up</code>, tapi tetap saja masih belum dapat ip. maka next kita exec dhclient pakai <code>sudo ip netns exec namespace_satu dhclient veth0-peer</code>
<img src="server//assets/eef365d5a00b998adf7153b07c0c9f6fee144b5f0c44cae796269b1d3d6ac142cb75939a65b00ea84ec1828783e5d4b2574e62f77cdd8a1a79df87b0.png" alt="image" /></li>
<li>test ping keluar
<img src="server//assets/cb4039e3828cd86cc73a5d980b39aceb4799ce9b4bfe34dc364ac87cd3e3500b12c118cf861de575ed4f86c2e1a98b8d3392bf43575726771234517e.png" alt="image" /></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-shadowsocks-proxy-server"><a class="header" href="#setup-shadowsocks-proxy-server">Setup shadowsocks proxy server</a></h1>
<p>shadowsocks-libev is available in the official repository for Debian 9("Stretch"), unstable, Ubuntu 16.10 and later derivatives:</p>
<pre><code class="language-sh">sudo apt update
sudo apt install shadowsocks-libev
</code></pre>
<p>then, create a file config on <code>/etc/shadowsocks-libev/config.json</code> which has contents something like this</p>
<pre><code class="language-json">{
    "server":["::1", "10.1.1.4"],
    "mode":"tcp_and_udp",
    "server_port":8388,
    "local_port":1080,
    "password":"1u21wW3E0bwu",
    "timeout":86400,
    "method":"chacha20-ietf-poly1305"
}

</code></pre>
<p>in this case, I use <code>10.1.1.4</code> as local ip, then forwarded through firewall to the public addr.</p>
<p>then, <code>sudo systemctl start shadowsocks-libev</code></p>
<p>ref: <a href="https://shadowsocks.org/doc/configs.html">https://shadowsocks.org/doc/configs.html</a></p>
<h1 id="connect"><a class="header" href="#connect">connect</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="alpine-htop-install-on-live-qemu"><a class="header" href="#alpine-htop-install-on-live-qemu">Alpine htop install on live QEMU</a></h1>
<h1 id="create-disk-first"><a class="header" href="#create-disk-first">create disk first</a></h1>
<pre><code class="language-sh">qemu-img create -f qcow2 alpine-1.qcow2 1G
</code></pre>
<h1 id="start-qemu"><a class="header" href="#start-qemu">start qemu</a></h1>
<p>download iso here <a href="https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/x86_64/alpine-virt-3.21.3-x86_64.iso">https://dl-cdn.alpinelinux.org/alpine/v3.21/releases/x86_64/alpine-virt-3.21.3-x86_64.iso</a></p>
<pre><code class="language-sh">qemu-system-x86_64 \
      -enable-kvm \
      -m 256 \
      -smp 4 \
      -cpu host \
      -drive file=pc-1.qcow2,format=qcow2 \
      -cdrom alpine-virt-3.21.3-x86_64.iso \
      -boot d \
      -net nic \
      -net user -nographic
</code></pre>
<p>default username is <code>root</code>, password left blank, just enter</p>
<h1 id="set-eth0-up--dhcp"><a class="header" href="#set-eth0-up--dhcp">set eth0 up &amp; DHCP</a></h1>
<ul>
<li><code>ip link set dev eth0 up</code></li>
<li><code>udhcpc -i eth0</code></li>
<li><code>ping 1.1.1.1</code> (testing)</li>
</ul>
<p>for <code>/etc/resolv.conf</code>, change to <code>nameserver 1.1.1.1</code></p>
<h1 id="patch-apk-configuration"><a class="header" href="#patch-apk-configuration">patch apk configuration</a></h1>
<p><code>cp /etc/apk/repositories /etc/apk/repositories-old</code></p>
<pre><code class="language-patch">--- repositories-old
+++ repositories
@@ -1 +1,2 @@
-/media/cdrom/apks
+http://dl-cdn.alpinelinux.org/alpine/v3.21/main
+http://dl-cdn.alpinelinux.org/alpine/v3.21/community
</code></pre>
<h1 id="update"><a class="header" href="#update">update</a></h1>
<ul>
<li><code>apk update</code></li>
<li><code>apk cache download</code></li>
<li><code>apk cache -v sync</code></li>
</ul>
<h1 id="setup-partition"><a class="header" href="#setup-partition">setup partition</a></h1>
<div class="warning">
Note 
<p>set it with your needs, I use entire disk in this docs</p>
</div>
<p>make sure first your ext4 kernel module is installed &amp; loaded by typing</p>
<ul>
<li><code>lsmod | grep ext4</code>: check</li>
<li><code>modprobe ext4</code></li>
<li><code>lsmod | grep ext4</code>: recheck again</li>
</ul>
<p>the output is should be something like this
<img src="server//assets/37fc640f3957aa8c9cc08ae77ed08afc3ad58b7b1187232994a259776acbdc94fe64e1a8b0cd1cbd834fc51e3f7d9d21cdd850a4fbfd35aa0092ffb9.png" alt="image" /></p>
<p>then we can move forward to ext4 partition generation</p>
<h1 id="partitioning"><a class="header" href="#partitioning">partitioning</a></h1>
<p>install parted first using <code>apk add parted</code>, check your disk first using <code>fdisk -l</code>, for example there is <code>/dev/sda</code></p>
<h2 id="parted-section"><a class="header" href="#parted-section">parted section</a></h2>
<p>run <code>parted /dev/sda</code>, inside of parted is</p>
<ul>
<li><code>unit s</code></li>
<li><code>mklabel [gpt/msdos]</code>: I use msdos anyway</li>
<li><code>print</code>: identify disk size by see on section something like Disk /dev/sda: 2097152s, there has 2097152s sector, so I use 2097152 - (2948 * 2), which is 2093056s</li>
<li><code>mkpart</code>
<ul>
<li><code>primary</code></li>
<li><code>ext4</code></li>
<li><code>2048s</code></li>
<li><code>2093056s</code>
<ul>
<li><code>q</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>resulted partition:
<img src="server//assets/2e9d14e41182f8915e615acd0bedb1797c4a5b13411506a142ce9bf33b0874ce1abbc3963190e351a97b67876af6c7613735930d2e1c71140947c98d.png" alt="image" /></p>
<h1 id="setup-diskless-install"><a class="header" href="#setup-diskless-install">setup diskless install</a></h1>
<p>warn: you need to enable ext4 kernel module or you'll get <code>mount: mounting /dev/sda1 on /media/sda1 failed: Invalid argument</code> when mounting</p>
<ul>
<li><code>modprobe ext4</code></li>
<li><code>apk add e2fsprogs</code> for <code>mkfs.ext4</code> command</li>
<li><code>mkfs.ext4 /dev/sda1</code></li>
<li><code>mount /dev/sda1 /media/sda1</code>: mount location should be located on <code>/media</code>, not <code>/mnt</code></li>
</ul>
<p>then, you can do normal <code>setup-alpine</code>, except for this thing</p>
<ul>
<li>Which disk(s) would you like to use? (or '?' for help or 'none') [none] none</li>
<li>Enter where to store configs ('floppy', 'sda1', 'usb' or 'none') [sda1] sda1</li>
<li>Enter apk cache directory (or '?' or 'none') [/media/sda1/cache] /media/sda1/cache</li>
</ul>
<h1 id="lbu"><a class="header" href="#lbu">LBU</a></h1>
<p>run <code>lbu commit</code></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="run-router-os-on-qemu"><a class="header" href="#run-router-os-on-qemu">Run router-OS on qemu</a></h1>
<p>on normal interface</p>
<pre><code class="language-sh">qemu-system-x86_64 \
          -enable-kvm \
          -boot order=d \
          -cdrom chr-6.49.18.img \
          -drive file=chr.qcow2,format=qcow2 \
          -m 4G \
          -smp 4 \
          -net user,hostfwd=tcp::10022-:22,hostfwd=tcp::8291-:8291 \
          -net nic
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="setup-linux-bridge-between-routeros--alpine-linux-hosts"><a class="header" href="#setup-linux-bridge-between-routeros--alpine-linux-hosts">setup linux bridge between RouterOS &amp; Alpine linux hosts</a></h1>
<p>this docs is second part of <a href="http://localhost:3000/server/alpine_install_on_live_cd_qemu.html">this</a></p>
<p>first thing that we need to do is create a copy of qcow2 alpine, so we do not need to re-install again. do not forget to change the hostname &amp; password for easy identification</p>
<h1 id="setup-bridge"><a class="header" href="#setup-bridge">setup bridge</a></h1>
<ul>
<li><code>sudo ip link add br0-lan type bridge</code></li>
<li><code>sudo ip link add br1-lan type bridge</code></li>
</ul>
<h1 id="setup-tap"><a class="header" href="#setup-tap">setup TAP</a></h1>
<p>tap0 &amp; tap1 connected to br0-lan
tap2 &amp; tap3 connected to br1-lan</p>
<ul>
<li><code>sudo ip tuntap add dev tap0 mode tap</code></li>
<li><code>sudo ip tuntap add dev tap1 mode tap</code></li>
<li><code>sudo ip tuntap add dev tap2 mode tap</code></li>
<li><code>sudo ip tuntap add dev tap3 mode tap</code></li>
<li><code>sudo ip link set tap0 master br0-lan</code></li>
<li><code>sudo ip link set tap1 master br0-lan</code></li>
<li><code>sudo ip link set tap2 master br1-lan</code></li>
<li><code>sudo ip link set tap3 master br1-lan</code></li>
<li><code>sudo ip link set tap0 up</code></li>
<li><code>sudo ip link set tap1 up</code></li>
<li><code>sudo ip link set tap2 up</code></li>
<li><code>sudo ip link set tap3 up</code></li>
</ul>
<h1 id="launch-mikrotik-iso"><a class="header" href="#launch-mikrotik-iso">launch mikrotik ISO</a></h1>
<pre><code class="language-sh">qemu-system-x86_64 \
      -enable-kvm \
      -boot order=d \
      -drive file=chr.qcow2,format=qcow2 \
      -m 256M \
      -smp 4 \
      -netdev tap,id=net0,ifname=tap0,script=no,downscript=no \
      -device virtio-net-pci,netdev=net0,mac=02:11:2a:3b:ff:c3  \
      -netdev tap,id=net1,ifname=tap2,script=no,downscript=no \
      -device virtio-net-pci,netdev=net1,mac=02:1a:f2:f1:21:b5  \
      -nographic \
      -net user,hostfwd=tcp::10022-:22,hostfwd=tcp::8291-:8291 \
      -net nic
</code></pre>
<p><img src="server//assets/74d589bde385dccca9047d3167ed42def74f535f82c92cbf66599c40b835c624eaf8de74ef1787a86df7886b00194fdaef8e290afbef0021128ef4a1.png" alt="image" /></p>
<p>based on topology, we know that</p>
<ul>
<li><code>02:11:2a:3b:ff:c3</code> used by tap0 (in routerOS, bridge 0)</li>
<li><code>02:1a:f2:f1:21:b5</code> used by tap2 (in routerOS, bridge 1)</li>
<li><code>tap1</code> &amp; <code>tap3</code> used by alpine virtual machine</li>
</ul>
<p>now run alpine iso</p>
<h1 id="alpine-as-pc-1"><a class="header" href="#alpine-as-pc-1">alpine (as pc-1)</a></h1>
<pre><code class="language-sh">qemu-system-x86_64 \
            -enable-kvm \
            -m 256 \
            -smp 4 \
            -cpu host \
            -drive file=pc-1.qcow2,format=qcow2 \
            -cdrom alpine-virt-3.21.3-x86_64.iso \
            -boot d \
            -nographic \
            -netdev tap,id=net0,ifname=tap1,script=no,downscript=no \
            -device virtio-net-pci,netdev=net0
</code></pre>
<h1 id="alpine-as-pc-3"><a class="header" href="#alpine-as-pc-3">alpine (as pc-3)</a></h1>
<pre><code class="language-sh">qemu-system-x86_64 \
            -enable-kvm \
            -m 256 \
            -smp 4 \
            -cpu host \
            -drive file=pc-2.qcow2,format=qcow2 \
            -cdrom alpine-virt-3.21.3-x86_64.iso \
            -boot d \
            -nographic \
            -netdev tap,id=net0,ifname=tap3,script=no,downscript=no \
            -device virtio-net-pci,netdev=net0
</code></pre>
<h1 id="winbox-config"><a class="header" href="#winbox-config">WinBox config</a></h1>
<p>first, we need to see the configuration &amp; which etherX by looking to spesific mac-addr, we find out that</p>
<pre><code class="language-txt">[admin@MikroTik] &gt; /interface print
Flags: D - dynamic, X - disabled, R - running, S - slave 
 #     NAME                                TYPE       ACTUAL-MTU L2MTU  MAX-L2MTU MAC-ADDRESS      
 0  R  ;;; wan
       ether1                              ether            1500                  52:54:00:12:34:56
 1  R  ether4                              ether            1500                  02:11:2A:3B:FF:C3
 2  R  ether5                              ether            1500                  02:1A:F2:F1:21:B5
[admin@MikroTik] &gt; 
</code></pre>
<p>next thing, lets configure our ip using winbox, this is ip configuration
<img src="server//assets/7dedfcaff5c700e6e724ad760e3b5fc2436b7c644d63310b24aaaf93490a6b8d5cf51677ce32e719a4e0237ec43dfd8ed5e624c58e890d7c37f81ce1.png" alt="image" /></p>
<p>DHCP server section
<img src="server//assets/ca1cdfa9afe3e1d127ce07a5c1e57d47f87842aa0d4804d3b926fcf883b73ed90cc602012200326be8fdbcb021a7f40fa974427ce40f6ccb530c9322.png" alt="image" /></p>
<p>now, try run <code>udhcpc -i eth0</code> on each vm</p>
<h1 id="result-on-pc-1"><a class="header" href="#result-on-pc-1">result on pc-1</a></h1>
<p><img src="server//assets/4e13804d5d7b7ceb052ab19a79d8bf0720b28671348a035f0bfe9809eff022183489033a1c0c11482e99cb3c8dea4785747482724f5a37ab6ad8b61c.png" alt="image" /></p>
<h1 id="result-on-pc-2"><a class="header" href="#result-on-pc-2">result on pc-2</a></h1>
<p><img src="server//assets/1458eceef396746ef428f3d19210c34e564131ad6f30a26d5f075ef170fa0ae20f403f5dbf1f44d924f85b7105a51568576bb16246475772d26d0c55.png" alt="image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="linux-iptables-preview-try-making-a-nat"><a class="header" href="#linux-iptables-preview-try-making-a-nat">Linux iptables preview (try making a nat)</a></h1>
<p>for example, <code>iptables -t nat</code> the t option from manpage is</p>
<pre><code>          filter:
              This  is  the  default  table  (if  no -t option is passed). It contains the built-in
              chains INPUT (for packets destined to local  sockets),  FORWARD  (for  packets  being
              routed through the box), and OUTPUT (for locally-generated packets).

          nat:
              This  table  is consulted when a packet that creates a new connection is encountered.
              It consists of four built-ins: PREROUTING (for altering packets as soon as they  come
              in),  INPUT  (for  altering packets destined for local sockets), OUTPUT (for altering
              locally-generated packets before routing), and POSTROUTING (for altering  packets  as
              they are about to go out).  IPv6 NAT support is available since kernel 3.7.

          mangle:
              This table is used for specialized packet alteration.  Until kernel 2.4.17 it had two
              built-in chains: PREROUTING (for altering incoming packets before routing) and OUTPUT
              (for  altering locally-generated packets before routing).  Since kernel 2.4.18, three
              other built-in chains are also supported: INPUT (for packets coming into the box  it‐
              self),  FORWARD  (for altering packets being routed through the box), and POSTROUTING
              (for altering packets as they are about to go out).

          raw:
              This table is used mainly for configuring exemptions from connection tracking in com‐
              bination with the NOTRACK target.  It registers at the netfilter  hooks  with  higher
              priority and is thus called before ip_conntrack, or any other IP tables.  It provides
              the  following  built-in chains: PREROUTING (for packets arriving via any network in‐
              terface) and OUTPUT (for packets generated by local processes).

          security:
              This table is used for Mandatory Access Control (MAC) networking rules, such as those
              enabled by the SECMARK and CONNSECMARK targets.  Mandatory Access Control  is  imple‐
              mented by Linux Security Modules such as SELinux.  The security table is called after
              the filter table, allowing any Discretionary Access Control (DAC) rules in the filter
              table  to  take  effect before MAC rules.  This table provides the following built-in
              chains: INPUT (for packets coming into the box itself), OUTPUT (for altering locally-
              generated packets before routing), and FORWARD (for  altering  packets  being  routed
              through the box).
</code></pre>
<h1 id="what-kind-of-tables-in-iptables"><a class="header" href="#what-kind-of-tables-in-iptables">What kind of tables in iptables</a></h1>
<p>according from <a href="https://wiki.archlinux.org/title/Iptables">archlinux wiki</a></p>
<p>iptables contains five tables:</p>
<ul>
<li>raw is used only for configuring packets so that they are exempt from connection tracking.</li>
<li>filter is the default table, and is where all the actions typically associated with a firewall take place.</li>
<li>nat is used for network address translation (e.g. port forwarding).</li>
<li>mangle is used for specialized packet alterations.</li>
<li>security is used for Mandatory Access Control networking rules (e.g. SELinux -- <a href="https://lwn.net/Articles/267140/">see this article</a> for more details).</li>
</ul>
<p>In most common use cases, you will only use two of these: filter and nat. The other tables are aimed at complex configurations involving multiple routers and routing decisions and are in any case beyond the scope of these introductory remarks.</p>
<h1 id="tables--chain-details"><a class="header" href="#tables--chain-details">Tables &amp; chain details</a></h1>
<p>all iptables chain information can be gathered by this command</p>
<pre><code class="language-sh">sudo iptables -t filter -L
sudo iptables -t nat -L
sudo iptables -t mangle -L
sudo iptables -t raw -L
sudo iptables -t security -L
</code></pre>
<p>this is list of all chain by corresponding table</p>
<h2 id="table-raw"><a class="header" href="#table-raw">table <code>raw</code></a></h2>
<ul>
<li>PREROUTING</li>
<li>OUTPUT</li>
</ul>
<h2 id="table-nat"><a class="header" href="#table-nat">table <code>nat</code></a></h2>
<ul>
<li>PREROUTING</li>
<li>INPUT</li>
<li>OUTPUT</li>
<li>POSTROUTING</li>
</ul>
<h2 id="table-mangle"><a class="header" href="#table-mangle">table <code>mangle</code></a></h2>
<ul>
<li>PREROUTING</li>
<li>INPUT</li>
<li>FORWARD</li>
<li>OUTPUT</li>
<li>POSTROUTING</li>
</ul>
<h2 id="table-filter"><a class="header" href="#table-filter">table <code>filter</code></a></h2>
<ul>
<li>INPUT</li>
<li>FORWARD</li>
<li>OUTPUT</li>
</ul>
<h2 id="table-security"><a class="header" href="#table-security">table <code>security</code></a></h2>
<ul>
<li>INPUT</li>
<li>FORWARD</li>
<li>OUTPUT</li>
</ul>
<p>we will focus on <code>NAT</code> section.</p>
<h1 id="machine-session"><a class="header" href="#machine-session">machine session</a></h1>
<p>In iptables, packet often categorized as 4 different state, such</p>
<ul>
<li>NEW</li>
<li>ESTABLISHED</li>
<li>RELATED</li>
<li>INVALID</li>
</ul>
<p>this connection tracking is done by a special framework within the kernel called conntrack</p>
<h1 id="command-lists"><a class="header" href="#command-lists">command lists</a></h1>
<p>this is some special iptables command collection</p>
<ul>
<li><code>iptables --list-rules</code>: show all ip rules</li>
<li><code>iptables --table nat --list --line-numbers</code>: will useful if you want to delete spesific rule, i.e, duplicated rule</li>
<li><code>sudo iptables --table nat -D POSTROUTING 2</code> example: delete rule 2</li>
</ul>
<h2 id="create-your-own-chain"><a class="header" href="#create-your-own-chain">create your own chain</a></h2>
<ul>
<li><code>iptables -N chain_name</code>: eq: <code>--new-chain</code></li>
<li><code>iptables -A chain_name -p icmp -j accept</code> (example)</li>
</ul>
<h2 id="make-changes-permanent"><a class="header" href="#make-changes-permanent">make changes permanent</a></h2>
<p><code>sudo iptables-save &gt; /etc/iptables/rules.v4</code></p>
<h2 id="tables-explanation"><a class="header" href="#tables-explanation">tables explanation</a></h2>
<pre><code class="language-txt">&gt; sudo iptables --table nat --list
Chain PREROUTING (policy ACCEPT)
target     prot opt source               destination         

Chain INPUT (policy ACCEPT)
target     prot opt source               destination         

Chain OUTPUT (policy ACCEPT)
target     prot opt source               destination         

Chain POSTROUTING (policy ACCEPT)
target     prot opt source               destination         
MASQUERADE  all  --  anywhere             anywhere            
MASQUERADE  all  --  anywhere             anywhere            
MASQUERADE  all  --  anywhere             anywhere            
MASQUERADE  all  --  anywhere             anywhere            
</code></pre>
<p>target: what to do with packet.
prot: abbr of protocol
opt: abbr of options (AI says rarely used)
source: its <code>anywhere</code> or explicit ip such <code>192.168.1.0/24</code>
destination: same as source, can be network</p>
<h2 id="show-rules-from-x-table"><a class="header" href="#show-rules-from-x-table">show rules from X table</a></h2>
<p>for example, there has</p>
<ul>
<li><code>nat</code> table, which contains <code>PREROUTING</code>, <code>INPUT</code>, <code>OUTPUT</code>, <code>POSTROUTING</code></li>
<li><code>filter</code> table contains main chain that used by iptables for packet filtering, which contains <code>INPUT</code>, <code>FORWARD</code>, <code>OUTPUT</code></li>
</ul>
<p>MORE deeper on X table</p>
<div class="table-wrapper"><table><thead><tr><th>Table</th><th>Purpose</th><th>Chains it uses</th></tr></thead><tbody>
<tr><td><code>filter</code></td><td>Default, handles packet filtering</td><td><code>INPUT</code>, <code>OUTPUT</code>, <code>FORWARD</code></td></tr>
<tr><td><code>nat</code></td><td>Network Address Translation</td><td><code>PREROUTING</code>, <code>POSTROUTING</code>, <code>OUTPUT</code></td></tr>
<tr><td><code>mangle</code></td><td>Packet modification (TTL, TOS, etc.)</td><td>All chains</td></tr>
<tr><td><code>raw</code></td><td>Pre-connection tracking processing</td><td><code>PREROUTING</code>, <code>OUTPUT</code></td></tr>
<tr><td><code>security</code></td><td>SELinux/LSM-based packet filtering</td><td><code>INPUT</code>, <code>OUTPUT</code>, <code>FORWARD</code></td></tr>
</tbody></table>
</div><div style="break-before: page; page-break-before: always;"></div><h1 id="linux-qemu-network-address-translation"><a class="header" href="#linux-qemu-network-address-translation">Linux QEMU network address translation</a></h1>
<p>first all, set setup our interface</p>
<ul>
<li><code>sudo ip tuntap add tap0 mode tap</code></li>
<li><code>sudo ip tuntap add tap1 mode tap</code> (optional, if there has any more vm)</li>
<li><code>sudo ip link add br0-lan type bridge</code> (our switch)</li>
<li><code>sudo ip addr add 192.168.12.1/24 dev br0-lan</code></li>
<li><code>sudo ip link set br0-lan up</code></li>
<li><code>sudo ip link set tap0 up</code>, also with tap1 if needed</li>
</ul>
<h1 id="run-alpine-guest-hosts"><a class="header" href="#run-alpine-guest-hosts">Run alpine guest hosts</a></h1>
<pre><code class="language-sh">qemu-system-x86_64 \
            -enable-kvm \
            -m 256 \
            -smp 4 \
            -cpu host \
            -drive file=pc-2.qcow2,format=qcow2 \
            -cdrom alpine-virt-3.21.3-x86_64.iso \
            -boot d \
            -nographic \
            -netdev tap,id=net0,ifname=tap0,script=no,downscript=no \
            -device virtio-net-pci,netdev=net0
</code></pre>
<h1 id="inside-of-guest-vm"><a class="header" href="#inside-of-guest-vm">Inside of guest VM</a></h1>
<p>Your <code>ip addr</code> output might something like this</p>
<pre><code class="language-txt">1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN qlen 1000
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
       valid_lft forever preferred_lft forever
    inet6 ::1/128 scope host 
       valid_lft forever preferred_lft forever
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state DOWN qlen 1000
    link/ether 52:54:00:12:34:56 brd ff:ff:ff:ff:ff:ff
    inet6 fe80::5054:ff:fe12:3456/64 scope link 
       valid_lft forever preferred_lft forever
</code></pre>
<p>now set eth0 up by typing</p>
<ul>
<li><code>ip link set eth0 up</code></li>
<li><code>ip addr add 192.168.12.2/24 dev eth0</code> (I manually setting up IP)</li>
</ul>
<p>check ip route</p>
<pre><code class="language-sh">pc-2:~# ip r
192.168.12.0/24 dev eth0 scope link  src 192.168.12.2 
</code></pre>
<p>there is no route, run <code>ip route add default via 192.168.12.1</code>, check again with ip route</p>
<pre><code class="language-txt">pc-2:~# ip r
default via 192.168.12.1 dev eth0 
192.168.12.0/24 dev eth0 scope link  src 192.168.12.2 
</code></pre>
<h1 id="setting-up-firewall"><a class="header" href="#setting-up-firewall">setting up firewall</a></h1>
<p>we want everyting from br0-lan is forwarded into wlan0, vice versa. in order to do that, we need NAT (network address translation)</p>
<p>here</p>
<h2 id="check-your-nat-table-first"><a class="header" href="#check-your-nat-table-first">check your nat table first</a></h2>
<p><code>sudo iptables --table nat --list -v</code>, make sure there is no</p>
<pre><code class="language-txt"> 2151  499K MASQUERADE  all  --  any    wlan0   anywhere             anywhere            
</code></pre>
<p>now run</p>
<ul>
<li><code>sudo iptables --table nat --append POSTROUTING --out-interface wlan0 -j MASQUERADE</code></li>
<li><code>sudo iptables -t filter -A FORWARD -i wlan0 -o br0-lan -m state --state RELATED,ESTABLISHED -j ACCEPT</code></li>
<li><code>sudo iptables -t filter -A FORWARD -i br0-lan -o wlan0 -j ACCEPT</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="qemu-block-8888-from-host"><a class="header" href="#qemu-block-8888-from-host">QEMU block 8.8.8.8 from host</a></h1>
<p>after <a href="server/../server/qemu_nat.html">this</a></p>
<p>I want this rule</p>
<ul>
<li>allow other ICMP (i.e 1.1.1.1)</li>
<li>deny ICMP 8.8.8.8</li>
</ul>
<h1 id="iptables-rule"><a class="header" href="#iptables-rule">iptables rule</a></h1>
<p>suppose, vm ip is 192.168.12.2, so the iptables command is</p>
<pre><code class="language-sh">sudo iptables -t filter -A FORWARD -s 192.168.12.2 -d 8.8.8.8 -p icmp -j DROP
</code></pre>
<p>note:</p>
<ul>
<li>t: explicit table</li>
<li>a: table FORWARD</li>
<li>s: source from 192.168.12.2 (OUR VM)</li>
<li>d: destination: 8.8.8.8</li>
<li>p: protocol (which is ICMP)</li>
<li>j: jump</li>
</ul>
<h1 id="the-problem"><a class="header" href="#the-problem">the problem</a></h1>
<p>you may see ping 8.8.8.8 still success, let check iptables rule</p>
<pre><code class="language-sh">sudo iptables -t filter -L FORWARD -n --line-numbers -v
</code></pre>
<p>the output</p>
<pre><code class="language-txt">Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination         
1    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
2    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           
3    DROP       icmp --  192.168.12.2         8.8.8.8             
</code></pre>
<p>see? when ping to 8.8.8.8, its stop at rule 2, which abort 3st rule, in order to fix it, we need re-order this</p>
<p>remote all rule</p>
<pre><code class="language-sh">sudo iptables -t filter -F FORWARD
</code></pre>
<p>re-add</p>
<pre><code class="language-sh">sudo iptables -t filter -A FORWARD -m state --state RELATED,ESTABLISHED -j ACCEPT
sudo iptables -t filter -A FORWARD -s 192.168.12.2 -d 8.8.8.8 -p icmp -j DROP
sudo iptables -t filter -A FORWARD -s 192.168.12.2/24 -j ACCEPT
</code></pre>
<p>Try re-run <code>sudo iptables -t filter -L FORWARD -n --line-numbers</code></p>
<p>the order should be fixed</p>
<pre><code class="language-txt">Chain FORWARD (policy ACCEPT)
num  target     prot opt source               destination         
1               all  --  0.0.0.0/0            0.0.0.0/0            state RELATED,ESTABLISHED
2    DROP       icmp --  192.168.12.2         8.8.8.8             
3    ACCEPT     all  --  0.0.0.0/0            0.0.0.0/0           
</code></pre>
<p><img src="server//assets/fe70890c7092ec6722fc720cd7358a0107ebfa293c9a1474d84672fb2d07dddff6a1e8027dc13e5f047194144034338506a30d6420584eda58a6019b.png" alt="image" /></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="two-alpine-guest-vm-block-custom-ports"><a class="header" href="#two-alpine-guest-vm-block-custom-ports">two alpine guest VM, block custom ports</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="logic-netfilter-linux-kernel"><a class="header" href="#logic-netfilter-linux-kernel">logic netfilter linux kernel</a></h1>
<h1 id="logic-nat"><a class="header" href="#logic-nat">Logic NAT</a></h1>
<p>misalkan kita ada virtual interface br0, dengan anggotanya tap0, tap1 lalu ingin forward semua traffic ke wlan0 (karna memang wlan0 tidak bisa di jadikan master dari x y z)</p>
<p>maka solusinya iptables</p>
<pre><code class="language-sh">sudo iptables -t nat -A POSTROUTING -o wlan0 -j MASQUERADE
</code></pre>
<p>logic nya</p>
<ul>
<li>fill dulu tabel nat</li>
<li>append ke postrouting, jadi setelah packet di routing oleh linux kernel, ada 2 field, source addr (katakanlah ip tap0) lalu destination addr (misal 8.8.8.8)</li>
<li>nah, semisal tidak di apa apakan, packet sent ke 8.8.8.8, tapi 8.8.8.8 tidak bisa mengirim back packetnya karna source addr nya invalid (di stage ini, source ip nya adalah IP LAN)</li>
<li>maka, setelah linux kernel meng-routingkan packet nya, seketika setelah itu (postrouting), kita ganti source addrnya dengan source ip PUBLIK milik firewall, jadi 8.8.8.8 bisa tahu kemana packet harus dikirim kembali</li>
<li>didalam firewall, packet yang tadi diterima, direverse balik oleh nat, dan dikirim balik ke perangkat aslinya.</li>
<li>pakai MASQUERADE</li>
</ul>
<h1 id="logic-forward-data-dari-br0-ke-wlan"><a class="header" href="#logic-forward-data-dari-br0-ke-wlan">logic forward data dari br0 ke wlan</a></h1>
<pre><code class="language-sh">sudo iptables -A FORWARD -i br0 -o wlan0 -j ACCEPT
</code></pre>
<p>important notes:</p>
<ul>
<li>chain FORWARD: This chain is only used for packets that are not destined for the local machine, but are routed through it (i.e., from one interface to another).</li>
<li>In this case: a device connected to br0 (e.g., a VM or container) wants to access the internet via wlan0.</li>
</ul>
<p>analoginya</p>
<pre><code class="language-txt">[Device 192.168.100.2] ──&gt; [br0 (Linux bridge)] ──&gt; Linux router ──&gt; [wlan0] ──&gt; Internet
</code></pre>
<p>bisa juga -j diganti drop, maka aliran data akan terputus</p>
<h1 id="logic-forward-dari-wlan0-ke-br0-sebaliknya"><a class="header" href="#logic-forward-dari-wlan0-ke-br0-sebaliknya">logic forward dari wlan0 ke br0 (sebaliknya)</a></h1>
<pre><code class="language-sh">sudo iptables -A FORWARD -i wlan0 -o br0 -m state --state RELATED,ESTABLISHED -j ACCEPT
</code></pre>
<p>logic:</p>
<ul>
<li>misal vm tap0 buat koneksi keluar, misal ke 8.8.8.8</li>
<li>dari tap0 -&gt; br0 -&gt; wlan0 di allow oleh rule <code>sudo iptables -A FORWARD -i br0 -o wlan0 -j ACCEPT</code></li>
<li>ketika server mengirim respon balik, maka alurnya dari wlan0 ke br0, nah ini fungsi dari <code>sudo iptables -A FORWARD -i wlan0 -o br0 -j ACCEPT</code></li>
</ul>
<p>KENAPA harus pakai <code>--state RELATED,ESTABLISHED</code>
karna kita butuh packet yg sudah estab duluan yg boleh lewat. ini akan menghindari jaringan luar (wlan0) mengakses br0 -&gt; tap0 &amp; tap1</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resep-nginx-oleh-pak-hanif"><a class="header" href="#resep-nginx-oleh-pak-hanif">resep nginx oleh pak hanif</a></h1>
<p>cuplikan config nginx di server, cc <a href="https://github.com/hansputera">@hansputera</a></p>
<pre><code class="language-txt">
server {
        listen 80; # tanpa server_default
        listen [::]:80;

        root /var/www/html/blablabla.fadev.org;
        
        index index.php index.html index.htm index.nginx-debian.html;

        server_name blablabla.fadev.org;

        location ~ \.php$ {
                include snippets/fastcgi-php.conf;

                fastcgi_pass unix:/run/php/php-fpm.sock;
        }
}

</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="ip-command"><a class="header" href="#ip-command">ip command</a></h1>
<h2 id="ip-addr"><a class="header" href="#ip-addr"><code>ip addr</code></a></h2>
<p>ip addr is used to display and manage IP addresses assigned to network interfaces.</p>
<p>example:</p>
<ul>
<li><code>ip addr</code></li>
<li><code>ip addr show</code></li>
<li><code>sudo ip addr add 192.168.1.100/24 dev eth0</code></li>
<li><code>sudo ip addr del 192.168.1.100/24 dev eth0</code></li>
</ul>
<p>anything about ip assigment</p>
<h2 id="ip-link"><a class="header" href="#ip-link"><code>ip link</code></a></h2>
<p>ip link is used to display and manage network interfaces (links), focusing on layer 2 (Ethernet, loopback, etc.), not IP addresses.</p>
<p>example:</p>
<ul>
<li><code>ip link</code></li>
<li><code>sudo ip link set dev eth0 up</code></li>
<li><code>sudo ip link set dev eth0 down</code></li>
<li><code>sudo ip link set dev eth0 mtu 1400</code></li>
</ul>
<p>anyting about interface</p>
<h2 id="ip-tuntap"><a class="header" href="#ip-tuntap"><code>ip tuntap</code></a></h2>
<p>ip tuntap manages TUN/TAP virtual network interfaces, which provide a way for user-space programs to interact with network packets as if they were network devices.</p>
<ul>
<li>TUN: Simulates a point-to-point device (layer 3), used for routing IP packets (e.g., VPN tunnels).</li>
<li>TAP: Simulates an Ethernet device (layer 2), used for bridging Ethernet frames (e.g., virtual switches, VMs).</li>
</ul>
<p>example:</p>
<ul>
<li><code>sudo ip tuntap add mode tap dev tap0</code></li>
<li><code>sudo ip tuntap add mode tun dev tun0</code></li>
<li><code>sudo ip tuntap del mode tap dev tap0</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="database"><a class="header" href="#database">Database</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="psql-command"><a class="header" href="#psql-command">psql command</a></h1>
<h2 id="general"><a class="header" href="#general">General</a></h2>
<ul>
<li><code>\bind</code> [PARAM]...       set query parameters</li>
<li><code>\copyright</code>             show PostgreSQL usage and distribution terms</li>
<li><code>\crosstabview</code> [COLUMNS] execute query and display result in crosstab</li>
<li><code>\errverbose</code>            show most recent error message at maximum verbosity</li>
<li><code>\g</code> [(OPTIONS)] [FILE]  execute query (and send result to file or |pipe);
<code>\g</code> with no arguments is equivalent to a semicolon</li>
<li><code>\gdesc</code>                 describe result of query, without executing it</li>
<li><code>\gexec</code>                 execute query, then execute each value in its result</li>
<li><code>\gset</code> [PREFIX]         execute query and store result in psql variables</li>
<li><code>\gx</code> [(OPTIONS)] [FILE] as <code>\g</code>, but forces expanded output mode</li>
<li><code>\q</code>                     quit psql</li>
<li><code>\watch</code> [[i=]SEC] [c=N] [m=MIN]
execute query every SEC seconds, up to N times,
stop if less than MIN rows are returned</li>
</ul>
<h2 id="help"><a class="header" href="#help">Help</a></h2>
<ul>
<li><code>\?</code> [commands]          show help on backslash commands</li>
<li><code>\?</code> options             show help on psql command-line options</li>
<li><code>\?</code> variables           show help on special variables</li>
<li><code>\h</code> [NAME]              help on syntax of SQL commands, * for all commands</li>
</ul>
<h2 id="query-buffer"><a class="header" href="#query-buffer">Query Buffer</a></h2>
<ul>
<li><code>\e</code> [FILE] [LINE]       edit the query buffer (or file) with external editor</li>
<li><code>\ef</code> [FUNCNAME [LINE]]  edit function definition with external editor</li>
<li><code>\ev</code> [VIEWNAME [LINE]]  edit view definition with external editor</li>
<li><code>\p</code>                     show the contents of the query buffer</li>
<li><code>\r</code>                     reset (clear) the query buffer</li>
<li><code>\s</code> [FILE]              display history or save it to file</li>
<li><code>\w</code> FILE                write query buffer to file</li>
</ul>
<h2 id="inputoutput"><a class="header" href="#inputoutput">Input/Output</a></h2>
<ul>
<li><code>\copy</code> ...              perform SQL COPY with data stream to the client host</li>
<li><code>\echo</code> [-n] [STRING]    write string to standard output (-n for no newline)</li>
<li><code>\i</code> FILE                execute commands from file</li>
<li><code>\ir</code> FILE               as \i, but relative to location of current script</li>
<li><code>\o</code> [FILE]              send all query results to file or |pipe</li>
<li><code>\qecho</code> [-n] [STRING]   write string to \o output stream (-n for no newline)</li>
<li><code>\warn</code> [-n] [STRING]    write string to standard error (-n for no newline)</li>
</ul>
<h2 id="conditional"><a class="header" href="#conditional">Conditional</a></h2>
<ul>
<li><code>\if</code> EXPR               begin conditional block</li>
<li><code>\elif</code> EXPR             alternative within current conditional block</li>
<li><code>\else</code>                  final alternative within current conditional block</li>
<li><code>\endif</code>                 end conditional block</li>
</ul>
<h2 id="informational"><a class="header" href="#informational">Informational</a></h2>
<p>(options: S = show system objects, + = additional detail)</p>
<ul>
<li>\d[S+]                 list tables, views, and sequences</li>
<li>\d[S+]  NAME           describe table, view, sequence, or index</li>
<li>\da[S]  [PATTERN]      list aggregates</li>
<li>\dA[+]  [PATTERN]      list access methods</li>
<li>\dAc[+] [AMPTRN [TYPEPTRN]]  list operator classes</li>
<li>\dAf[+] [AMPTRN [TYPEPTRN]]  list operator families</li>
<li>\dAo[+] [AMPTRN [OPFPTRN]]   list operators of operator families</li>
<li>\dAp[+] [AMPTRN [OPFPTRN]]   list support functions of operator families</li>
<li>\db[+]  [PATTERN]      list tablespaces</li>
<li>\dc[S+] [PATTERN]      list conversions</li>
<li>\dconfig[+] [PATTERN]  list configuration parameters</li>
<li>\dC[+]  [PATTERN]      list casts</li>
<li>\dd[S]  [PATTERN]      show object descriptions not displayed elsewhere</li>
<li>\dD[S+] [PATTERN]      list domains</li>
<li>\ddp    [PATTERN]      list default privileges</li>
<li>\dE[S+] [PATTERN]      list foreign tables</li>
<li>\des[+] [PATTERN]      list foreign servers</li>
<li>\det[+] [PATTERN]      list foreign tables</li>
<li>\deu[+] [PATTERN]      list user mappings</li>
<li>\dew[+] [PATTERN]      list foreign-data wrappers</li>
<li>\df[anptw][S+] [FUNCPTRN [TYPEPTRN ...]]
list [only agg/normal/procedure/trigger/window] functions</li>
<li>\dF[+]  [PATTERN]      list text search configurations</li>
<li>\dFd[+] [PATTERN]      list text search dictionaries</li>
<li>\dFp[+] [PATTERN]      list text search parsers</li>
<li>\dFt[+] [PATTERN]      list text search templates</li>
<li>\dg[S+] [PATTERN]      list roles</li>
<li>\di[S+] [PATTERN]      list indexes</li>
<li>\dl[+]                 list large objects, same as \lo_list</li>
<li>\dL[S+] [PATTERN]      list procedural languages</li>
<li>\dm[S+] [PATTERN]      list materialized views</li>
<li>\dn[S+] [PATTERN]      list schemas</li>
<li>\do[S+] [OPPTRN [TYPEPTRN [TYPEPTRN]]]
list operators</li>
<li>\dO[S+] [PATTERN]      list collations</li>
<li>\dp[S]  [PATTERN]      list table, view, and sequence access privileges</li>
<li>\dP[itn+] [PATTERN]    list [only index/table] partitioned relations [n=nested]</li>
<li>\drds [ROLEPTRN [DBPTRN]] list per-database role settings</li>
<li>\drg[S] [PATTERN]      list role grants</li>
<li>\dRp[+] [PATTERN]      list replication publications</li>
<li>\dRs[+] [PATTERN]      list replication subscriptions</li>
<li>\ds[S+] [PATTERN]      list sequences</li>
<li>\dt[S+] [PATTERN]      list tables</li>
<li>\dT[S+] [PATTERN]      list data types</li>
<li>\du[S+] [PATTERN]      list roles</li>
<li>\dv[S+] [PATTERN]      list views</li>
<li>\dx[+]  [PATTERN]      list extensions</li>
<li>\dX     [PATTERN]      list extended statistics</li>
<li>\dy[+]  [PATTERN]      list event triggers</li>
<li>\l[+]   [PATTERN]      list databases</li>
<li>\sf[+]  FUNCNAME       show a function's definition</li>
<li>\sv[+]  VIEWNAME       show a view's definition</li>
<li>\z[S]   [PATTERN]      same as \dp</li>
</ul>
<h2 id="large-objects"><a class="header" href="#large-objects">Large Objects</a></h2>
<ul>
<li>\lo_export LOBOID FILE write large object to file</li>
<li>\lo_import FILE [COMMENT]
read large object from file</li>
<li>\lo_list[+]            list large objects</li>
<li>\lo_unlink LOBOID      delete a large object</li>
</ul>
<h2 id="formatting"><a class="header" href="#formatting">Formatting</a></h2>
<ul>
<li>\a                     toggle between unaligned and aligned output mode</li>
<li>\C [STRING]            set table title, or unset if none</li>
<li>\f [STRING]            show or set field separator for unaligned query output</li>
<li>\H                     toggle HTML output mode (currently off)</li>
<li>\pset [NAME [VALUE]]   set table output option
(border|columns|csv_fieldsep|expanded|fieldsep|
fieldsep_zero|footer|format|linestyle|null|
numericlocale|pager|pager_min_lines|recordsep|
recordsep_zero|tableattr|title|tuples_only|
unicode_border_linestyle|unicode_column_linestyle|
unicode_header_linestyle|xheader_width)</li>
<li>\t [on|off]            show only rows (currently off)</li>
<li>\T [STRING]            set HTML <table> tag attributes, or unset if none</li>
<li>\x [on|off|auto]       toggle expanded output (currently off)</li>
</ul>
<h2 id="connection"><a class="header" href="#connection">Connection</a></h2>
<ul>
<li>\c[onnect] {[DBNAME|- USER|- HOST|- PORT|-] | conninfo}
connect to new database (currently "fadev_infra")</li>
<li>\conninfo              display information about current connection</li>
<li>\encoding [ENCODING]   show or set client encoding</li>
<li>\password [USERNAME]   securely change the password for a user</li>
</ul>
<h2 id="operating-system"><a class="header" href="#operating-system">Operating System</a></h2>
<ul>
<li>\cd [DIR]              change the current working directory</li>
<li>\getenv PSQLVAR ENVVAR fetch environment variable</li>
<li>\setenv NAME [VALUE]   set or unset environment variable</li>
<li>\timing [on|off]       toggle timing of commands (currently off)</li>
<li>! [COMMAND]           execute command in shell or start interactive shell</li>
</ul>
<h2 id="variables"><a class="header" href="#variables">Variables</a></h2>
<ul>
<li>\prompt [TEXT] NAME    prompt user to set internal variable</li>
<li>\set [NAME [VALUE]]    set internal variable, or list all if no parameters</li>
<li>\unset NAME            unset (delete) internal variable</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="psql-snippet"><a class="header" href="#psql-snippet">psql snippet</a></h1>
<h2 id="psql"><a class="header" href="#psql">psql</a></h2>
<ul>
<li><code>\df *.*</code> Lists all relations</li>
</ul>
<h2 id="command"><a class="header" href="#command">command</a></h2>
<ul>
<li><code>DROP TABLE table_name CASCADE;</code> used when you want to remove all object depend on them.</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="postgresql-database-creation-flow"><a class="header" href="#postgresql-database-creation-flow">PostgreSQL database creation flow</a></h1>
<p>in order to create database (for safety, I use postgres account). I use this step.</p>
<p>first, we need to login as <code>postgres</code> user, use this <code>sudo -u postgres psql</code>, then do</p>
<pre><code class="language-sql">CREATE DATABASE EXAMPLE_DB;
</code></pre>
<p>this is optional</p>
<pre><code class="language-sql">CREATE USER EXAMPLE_USER WITH ENCRYPTED PASSWORD 'Sup3rS3cret';
</code></pre>
<p>grant</p>
<pre><code class="language-sql">GRANT ALL PRIVILEGES ON DATABASE EXAMPLE_DB TO EXAMPLE_USER;
</code></pre>
<p>now, change the state using <code>\c EXAMPLE_DB postgres</code>, execute this command</p>
<pre><code class="language-sql">GRANT ALL ON SCHEMA public TO EXAMPLE_USER;
</code></pre>
<p>then, change ownership</p>
<pre><code class="language-sql">ALTER DATABASE my_database OWNER TO my_database_user;
</code></pre>
<p>notes: <a href="https://stackoverflow.com/questions/67276391/why-am-i-getting-a-permission-denied-error-for-schema-public-on-pgadmin-4">https://stackoverflow.com/questions/67276391/why-am-i-getting-a-permission-denied-error-for-schema-public-on-pgadmin-4</a></p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="how-to-use-sqlx-cli-tools-for-db-migration-such-laravel-migrations"><a class="header" href="#how-to-use-sqlx-cli-tools-for-db-migration-such-laravel-migrations">how to use SQLX cli tools for db migration such laravel migrations</a></h1>
<p>let's meet with this crate, <a href="https://crates.io/crates/sqlx-cli">https://crates.io/crates/sqlx-cli</a>, this tools allow you to use db migration such as laravel migration tools;</p>
<p>first, let's create env variable</p>
<pre><code>export DATABASE_URL=postgres://fadhil_riyanto:&lt;your_pass&gt;@localhost/&lt;target_db&gt;
</code></pre>
<p>then, the things that we do next is only</p>
<pre><code>sqlx migrate add -r &lt;name&gt;
</code></pre>
<p>running</p>
<pre><code>sqlx migrate run
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="other"><a class="header" href="#other">Other</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bookmarks-highly-useful-link"><a class="header" href="#bookmarks-highly-useful-link">bookmarks highly useful link</a></h1>
<h2 id="this-section-is-derived-from-my-original-channel-xorriso"><a class="header" href="#this-section-is-derived-from-my-original-channel-xorriso">this section is derived from my original channel <a href="https://t.me/xorriso">@xorriso</a></a></h2>
<h3 id="httpsxenbitsxenorgdocs46-testingmiscpvhhtml"><a class="header" href="#httpsxenbitsxenorgdocs46-testingmiscpvhhtml"><a href="https://xenbits.xen.org/docs/4.6-testing/misc/pvh.html">https://xenbits.xen.org/docs/4.6-testing/misc/pvh.html</a></a></h3>
<p><code>"PVH is to make use of the hardware virtualization extensions present in modern x86 CPUs in order to improve performance."</code></p>
<h3 id="httpswikixenprojectorgwikilinux_pvh"><a class="header" href="#httpswikixenprojectorgwikilinux_pvh"><a href="https://wiki.xenproject.org/wiki/Linux_PVH">https://wiki.xenproject.org/wiki/Linux_PVH</a></a></h3>
<p><code>Where one will select Processor type and features ---&gt; Linux guest support ---&gt;Support for running as a PVH guest</code></p>
<h3 id="httpsgithubcomgoldside543goldspace"><a class="header" href="#httpsgithubcomgoldside543goldspace"><a href="https://github.com/Goldside543/goldspace">https://github.com/Goldside543/goldspace</a></a></h3>
<h3 id="httpsmongocorglibmongoccurrentmongoc_client_newhtml"><a class="header" href="#httpsmongocorglibmongoccurrentmongoc_client_newhtml"><a href="https://mongoc.org/libmongoc/current/mongoc_client_new.html">https://mongoc.org/libmongoc/current/mongoc_client_new.html</a></a></h3>
<pre><code>kesimpulan: mongoc_client_new return null on error, but not even the string are correct
no connection checked.

jangan ngeharap mongoc_client_new ngeluarin null
</code></pre>
<h3 id="httpsfacultycsniueduhutchinscsci480signalshtm"><a class="header" href="#httpsfacultycsniueduhutchinscsci480signalshtm"><a href="https://faculty.cs.niu.edu/~hutchins/csci480/signals.htm">https://faculty.cs.niu.edu/~hutchins/csci480/signals.htm</a></a></h3>
<p>daftar exit code</p>
<h3 id="httpsgitkernelorgpubscmlinuxkernelgittorvaldslinuxgittreearchx86entrysyscallssyscall_64tbl"><a class="header" href="#httpsgitkernelorgpubscmlinuxkernelgittorvaldslinuxgittreearchx86entrysyscallssyscall_64tbl"><a href="https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/entry/syscalls/syscall_64.tbl">https://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git/tree/arch/x86/entry/syscalls/syscall_64.tbl</a></a></h3>
<p><code>list syscall</code></p>
<h3 id="httpswwwbitsinthewindcomabout-dacpublicationsunix-systems-programming"><a class="header" href="#httpswwwbitsinthewindcomabout-dacpublicationsunix-systems-programming"><a href="https://www.bitsinthewind.com/about-dac/publications/unix-systems-programming">https://www.bitsinthewind.com/about-dac/publications/unix-systems-programming</a></a></h3>
<p><code>system programming</code></p>
<h3 id="httpslwnnetarticles205126"><a class="header" href="#httpslwnnetarticles205126"><a href="https://lwn.net/Articles/205126/">https://lwn.net/Articles/205126/</a></a></h3>
<p><code>In recent times, Al's work has resulted in a long series of patches merged into the mainline, almost all of which have been marked as "endianness annotations." These patches mostly change the declared types for various functions, variables, and structure members. The new types may be unfamiliar to many, since they are relatively new - though not that new; they were introduced in 2.6.9. These types are __le16, __le32, __le64, __be16, __be32, and __be64. </code></p>
<h3 id="httpsgithubcomaugusttandocumentsblobmasterunix20network20programmingvolume12c3rdpdf"><a class="header" href="#httpsgithubcomaugusttandocumentsblobmasterunix20network20programmingvolume12c3rdpdf"><a href="https://github.com/AugustTan/documents/blob/master/UNIX%20Network%20Programming(Volume1%2C3rd).pdf">https://github.com/AugustTan/documents/blob/master/UNIX%20Network%20Programming(Volume1%2C3rd).pdf</a></a></h3>
<h3 id="httpsicsucieduaburtsev143a2017falllectures"><a class="header" href="#httpsicsucieduaburtsev143a2017falllectures"><a href="https://ics.uci.edu/~aburtsev/143A/2017fall/lectures/">https://ics.uci.edu/~aburtsev/143A/2017fall/lectures/</a></a></h3>
<p><code>Gas kuliah online tiada kata untuk tidak belajar, di topik ini Pak aburtsev membahas sistem operasi, sistem locknya, memory managemen, kernel, boot step nya, dll</code></p>
<h3 id="httposblogstephenmarzcomindexhtml"><a class="header" href="#httposblogstephenmarzcomindexhtml"><a href="http://osblog.stephenmarz.com/index.html">http://osblog.stephenmarz.com/index.html</a></a></h3>
<h3 id="httpsc-aresorgdocshtmlexamples"><a class="header" href="#httpsc-aresorgdocshtmlexamples"><a href="https://c-ares.org/docs.html#examples">https://c-ares.org/docs.html#examples</a></a></h3>
<p>dokumentasi C-ares (async dns resolver)</p>
<h3 id="httpsgithubcomtorvaldslinuxblobd683b96b072dc4680fc74964eca77e6a23d1fa6edriverscharrandomcl55"><a class="header" href="#httpsgithubcomtorvaldslinuxblobd683b96b072dc4680fc74964eca77e6a23d1fa6edriverscharrandomcl55"><a href="https://github.com/torvalds/linux/blob/d683b96b072dc4680fc74964eca77e6a23d1fa6e/drivers/char/random.c#L55">https://github.com/torvalds/linux/blob/d683b96b072dc4680fc74964eca77e6a23d1fa6e/drivers/char/random.c#L55</a></a></h3>
<p>"Computers are very predictable devices.  Hence it is extremely hard to produce truly random numbers on a computer"</p>
<h3 id="httpsstackoverflowcomquestions17898989what-is-global-start-in-assembly-language"><a class="header" href="#httpsstackoverflowcomquestions17898989what-is-global-start-in-assembly-language"><a href="https://stackoverflow.com/questions/17898989/what-is-global-start-in-assembly-language">https://stackoverflow.com/questions/17898989/what-is-global-start-in-assembly-language</a></a></h3>
<p>If you want to use a different entry point name other than _start (which is the default), you can specify -e parameter to ld like</p>
<p><code>ld -e my_entry_point -o output_filename object_filename</code></p>
<h3 id="inline-asm-gcc"><a class="header" href="#inline-asm-gcc">inline ASM GCC</a></h3>
<ul>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html">https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html</a></li>
<li><a href="https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#AssemblerTemplate">https://gcc.gnu.org/onlinedocs/gcc/Extended-Asm.html#AssemblerTemplate</a></li>
<li><a href="https://splichal.eu/gccsphinx-final/html/gcc/extensions-to-the-c-language-family/how-to-use-inline-assembly-language-in-c-code.html#inputoperands">https://splichal.eu/gccsphinx-final/html/gcc/extensions-to-the-c-language-family/how-to-use-inline-assembly-language-in-c-code.html#inputoperands</a></li>
</ul>
<h3 id="httpwwwucwczhubickapapersamd64node1html"><a class="header" href="#httpwwwucwczhubickapapersamd64node1html"><a href="http://www.ucw.cz/~hubicka/papers/amd64/node1.html">http://www.ucw.cz/~hubicka/papers/amd64/node1.html</a></a></h3>
<p>movabs is ATT-syntax for mov al/ax/eax/rax, byte/[d|q]word ptr [&lt;64-bit absolute address&gt;] or mov byte/[d|q]word ptr[&lt;64-bit absolute address&gt;], al/ax/eax/rax</p>
<p>tambahan:
movabs is used for absolute data moves, to either load an arbitrary 64-bit constant into a register or to load data in a register from a 64-bit address.</p>
<h3 id="httpselectronicsreferencecomassembly-languageassembly-language-registers"><a class="header" href="#httpselectronicsreferencecomassembly-languageassembly-language-registers"><a href="https://electronicsreference.com/assembly-language/assembly-language-registers/">https://electronicsreference.com/assembly-language/assembly-language-registers/</a></a></h3>
<h3 id="bookmark-movabs"><a class="header" href="#bookmark-movabs">bookmark movabs</a></h3>
<ul>
<li>http://www.ucw.cz/~hubicka/papers/amd64/node1.html</li>
<li>https://gcc.gnu.org/bugzilla/show_bug.cgi?id=82339</li>
<li>https://cs4157.github.io/www/2024-1/lect/13-x86-assembly.html</li>
</ul>
<h3 id="memory-layout-linux"><a class="header" href="#memory-layout-linux">memory layout linux</a></h3>
<ul>
<li><a href="https://www.kernel.org/doc/html/v5.8/x86/x86_64/mm.html">https://www.kernel.org/doc/html/v5.8/x86/x86_64/mm.html</a></li>
</ul>
<h2 id="this-section-is-pure-form-created-when-i-use-mdbook"><a class="header" href="#this-section-is-pure-form-created-when-i-use-mdbook">this section is pure form, created when I use mdbook</a></h2>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resume-alpro"><a class="header" href="#resume-alpro">Resume alpro</a></h1>
<h2 id="flowchart"><a class="header" href="#flowchart">flowchart</a></h2>
<p>Apa itu flowchart? simplenya, flowchat itu semacam bentuk gambar atau visual dari suatu langkah langkah algoritma. dan tentunya karna ini algoritma, maka ada step step seperti jika x maka y, lalu panah panah dari atas ke bawah, lalu input, dll. contoh flowchart cara memperbiaki lampu</p>
<p><img src="other//assets/LampFlowchart.svg" alt="gambar" /></p>
<h2 id="class"><a class="header" href="#class">Class</a></h2>
<pre><code>Apa itu class? class adalah cara kita mengatur kode agar scope nya bisa dipecah, misal func a isinya ada 1000 line, nah agar mudah mendebugnya, kita bisa pecah ke method method yang sangat banyak, dan juga kita tidak perlu lagi pusing dengan banyak variabel, kita cukup memakai satu varlable, lalu gunakan di seluruh class yang dinamai "property"

contoh simple, pakai property untuk nyimpan-tampilkan data,
</code></pre>
<pre><code class="language-cpp">#include &lt;string&gt;
#include &lt;iostream&gt;

using namespace std;

class abc {
    string nama;
public:
    void set_nama(string nama) {
        this-&gt;nama = nama;
    }

    void get_nama() {
        cout &lt;&lt; this-&gt;nama &lt;&lt; endl;
    }
};

int main() {
    abc abc;
    abc.set_nama("fadhil");
    abc.get_nama();
}
</code></pre>
<h2 id="enkapsulasi-encapsulation"><a class="header" href="#enkapsulasi-encapsulation">Enkapsulasi (encapsulation)</a></h2>
<p>Trik atau cara agar kita bisa memberi aturan ke class/property apakah ia bisa terlihat (public)? atau tidak (private/protected) ke class.</p>
<p>Intinya, bagaimana cara kita agar method atau property, tidak bisa secara sembarang diakses oleh kode lain. misal kita ada class trigonometri, dan method hitung sin, tetapi didalam hitung sin tersebut, ada method kecil kecil lagi yang banyak, tetapi fungsinya seperti hanya untuk ngebantu fungsi sin menjalankan tugasnya, nah fungsi2 yang kecil tadi itu nanti dibuat private, sedangkan fungsi sin yg dipakai dimana mana, dibuat public.</p>
<p>contoh kecil</p>
<pre><code class="language-cpp">#include &lt;string&gt;
#include &lt;iostream&gt;

using namespace std;

class abc {
    string nama;
private:
    void print_perkenalan() {
        cout &lt;&lt; "perkenalkan nama saya ";
    }

public:
    void set_nama(string nama) {
        this-&gt;nama = nama;
    }

    void get_nama() {
        this-&gt;print_perkenalan();
        cout &lt;&lt; this-&gt;nama &lt;&lt; endl;
    }
};

int main() {
    abc abc;
    abc.set_nama("fadhil");
    abc.get_nama();
}
</code></pre>
<p>terlihat public, private? nah itu adalah contoh encapsulation.</p>
<p>nah, <code>print_perkenalan</code> (hanya contoh) bertindak seolah olah dia hanya internal function dari suatu class yg besar. dan yang dipanggil dimana mana adalah get nama, dimana dibaliknya dia manggil banyak func yang lain.</p>
<p>dan <code>print_perkenalan</code> tidak boleh diakses langsung. termasuk property <code>nama</code> juga tidak boleh diakses langsung</p>
<h2 id="sorting"><a class="header" href="#sorting">Sorting</a></h2>
<h3 id="bubble-sort"><a class="header" href="#bubble-sort">Bubble Sort</a></h3>
<p>Konsepnya, dengan cara melempar lempar data array, sampai dia urut, BigO nya <code>O(n^2)</code>. cara kerja nya yaitu dengan cara menukar-nukar posisi array sekarang dengan array didepannya, jika array saat ini &gt; dari array didepannya, maka tukar posisinya</p>
<p>misal ada data simple seperti ini</p>
<pre><code class="language-txt">2  3  1  (awal mulanya)
2  1  3  (3 ditukar karna 3 &gt; 1)
1  2  3 (2 ditukar karna 2 &gt; 1)
1  2  3  (selesai)
</code></pre>
<h3 id="selection-sort"><a class="header" href="#selection-sort">Selection Sort</a></h3>
<p>TL;DR, menemukan data yg lebih kecil dari nilai minimum saat ini, tunggu loopnya yang didalam selesai baru di swap.</p>
<pre><code class="language-txt">contoh kita akan sorting

2  9  4   1  (belum diapa-apakan)
2  9  4   1  (minimum index ke 0, yaitu 2)
2  9  4   1  (bandingkan 9 dgn index ke 0 yaitu 2, 9 &lt; 2 false)
2  9  4   1  (bandingkan 4 dgn index ke 0, yaitu 2, 4 &lt; 2, false)
2  9  4   1  (bandingkan 1 dgn index ke 0, yaitu 2, 1 &lt; 2, true, maka tukar)
1  9  4   2  (set minimum di index  ke 1 sekarang, yaitu 9)
1  9  4   2  (bandingkan 4 dgn index ke 1, 4 &lt; 9, true, maka kita biarkan karna loop belum selesai, tapi set minimum ke 4)
1  9  4   2  (cek apakah 2 &lt; 4, ya, set minimum ke 2)
1  2  4   9  (tukar)
1  2  4   9  (set minimum ke index ke 3, yaitu 4, apakah 9 &lt; 4, tidak)
--end---
</code></pre>
<h3 id="insertion-sort"><a class="header" href="#insertion-sort">insertion sort</a></h3>
<p>Konsepnya, misal lagi menyusun kartu dari satu per satu. Jadi kamu ambil satu kartu, terus kamu bandingin ke kiri, kalau dia lebih kecil dari yang di kiri-nya, tukar posisinya. Terus begitu sampai semua kartu (data) urut</p>
<p>contoh</p>
<pre><code class="language-txt">5 3 4 1 (unchanged)
3 5 4 1 (3 dimasukkan ke kiri 5 karena 3 &lt; 5)
3 4 5 1 (4 dimasukkan, dia lebih kecil dari 5, jadi tukar)
1 3 4 5 (1 dimasukkan paling kiri, karena dia lebih kecil dari semuanya)
</code></pre>
<h3 id="merge-sort"><a class="header" href="#merge-sort">merge sort</a></h3>
<p>misal ada data, terus di bagi-bagi tumpukan data jadi kecil-kecil dulu sampai tinggal satuan, baru nanti disusun lagi sambil dibandingin dan digabungin pelan-pelan sampai jadi urut.
Cara kerjanya pakai prinsip divide and conquer
Jadi data dibelah-belah jadi dua terus, sampai tinggal 1-an, lalu disatukan lagi sambil diurutin.</p>
<p>contoh gifnya (google)
<img src="other//assets/merge-sort-400.gif"></p>
<h3 id="sequential-search"><a class="header" href="#sequential-search">sequential search</a></h3>
<p>nah, ini search paling gampang wkwkwk, intinya loop terus array nya, jika ketemu idx nya pakai if else, maka break loopnya &amp; end</p>
<h3 id="binary-searching"><a class="header" href="#binary-searching">binary searching</a></h3>
<p>cara mencarinya data dibagi 2 ditengah tengah, lalu setelah dibagi 2, akan ada low (pojok kiri), mid (tengah tengah), high (pojok kanan). lalu cek saja pastikan data yg dicari == mid</p>
<p>jika tidak, maka cek statusnya dia kurang dari mid atau lebih, jika lebih, cari bagian kanan, jika kurang, cari bagian kiri. proses ini diulang terus dan tiap2 menemukan low dan high baru, maka mid pasti berubah.</p>
<h3 id="single-linked-list"><a class="header" href="#single-linked-list">single linked list</a></h3>
<p>misal, ini PSEUDOCODE</p>
<pre><code class="language-txt">struct node {
    data_asli,
    pointer_ke_struct_node_lain_sebut_saja_n
}
</code></pre>
<p>misal, kita define struct node sebagai a, maka kita ambil addr nya, lalu define lagi b, dimana b berisi data dan juga pointer ke a, lalu misal define lagi c, isinya pointer ke b.</p>
<p>maka secara harfiah, c -&gt; b -&gt; a
nah, untuk pengecekan, loop lalu deference terus saja untuk pointernya, jadi yg awalnya di c, setelah deference pointer milik b, posisi sekarang di b, lalu deference pointer next nya, alhasil kita dapat a, dan agar bisa stop. maka bagian palig akhir harus dikasih tanda, contoh disini tandanya bisa pakai nullptr.</p>
<p>intinya jika pas di deference isinya nullptr, maka sudah selesai</p>
<h2 id="sinle-linked-list-circular"><a class="header" href="#sinle-linked-list-circular">sinle linked list circular</a></h2>
<p>sama saja seperti single linked list, hanya aja dibagian akhir daripada diisi nullptr, kita isi pointer balik ke awal. alhasil dia seperti memutar.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="resume-alpro-double-linkedlists"><a class="header" href="#resume-alpro-double-linkedlists">Resume alpro double linkedlists</a></h1>
<p>langsung saja ini kodenya, 3 kode bebas, disini saya wrap di func saja karna agar tidak perlu buat banyak file.</p>
<p>penjelasan kode ADA DIBAGIAN BAWAH SNIPPET KODE ini.</p>
<pre><code class="language-cpp">#include &lt;cstddef&gt;
#include &lt;iostream&gt;

using namespace std;

struct Node {
  int data;
  Node *prev;
  Node *next;
};

Node *create_node(int data) {
  Node *newly_created_node = new Node;

  newly_created_node-&gt;data = data;
  newly_created_node-&gt;next = nullptr;
  newly_created_node-&gt;prev = nullptr;

  return newly_created_node;
}

void print(Node *head) {
  Node *current = head;
  cout &lt;&lt; "Informasi tentang setiap node:" &lt;&lt; endl;
  while (current != nullptr) {
    cout &lt;&lt; "Alamat: " &lt;&lt; current &lt;&lt; endl;
    cout &lt;&lt; "Nilai: " &lt;&lt; current-&gt;data &lt;&lt; endl;
    cout &lt;&lt; "Alamat prev: " &lt;&lt; current-&gt;prev &lt;&lt; endl;
    cout &lt;&lt; "Alamat next: " &lt;&lt; current-&gt;next &lt;&lt; endl &lt;&lt; endl;
    current = current-&gt;next;
  }
  cout &lt;&lt; "---------------------------------------" &lt;&lt; endl;
}

void insert_last(Node *&amp;head, int data) {
  Node *newly_created_node = create_node(data);
  if (head == nullptr) {
    head = newly_created_node;
  } else {
    Node *current = head;

    while (current-&gt;next != nullptr) {
      current = current-&gt;next;
    }

    current-&gt;next = newly_created_node;
    newly_created_node-&gt;prev = current;
  }
}

void insertFirst(Node *&amp;head, int data) {
  Node *newNode = create_node(data);
  if (head == nullptr) {
    head = newNode;
  } else {
    newNode-&gt;next = head;
    head-&gt;prev = newNode; 
    head = newNode;
  }
}

void delete_first(Node *&amp;head) {

  if (head == nullptr) {
    printf("node kosong\n");
  }

  Node *temp = head;
  head = head-&gt;next;

  if (head != nullptr) {
    head-&gt;prev = nullptr;
  }

  delete temp;
}

int main() {
  Node *head = nullptr;

  head = create_node(7);
  insert_last(head, 1);
  insert_last(head, 10);
  delete_first(head);
  insertFirst(head, 99);

  print(head);
}
</code></pre>
<h3 id="func-create_node"><a class="header" href="#func-create_node">func <code>create_node</code></a></h3>
<p>Walau bukan bagian dari tugas, saya sekalian jelaskan saja. intinya func ini membuat node baru, yang isinya prev dan next, diisi nullptr (alias nullpointer), dan datanya.</p>
<p>jadi maksud func ini, kita bikin node yang bener2 kosong tanpa terhubung ke siapapun. lalu return value nya.</p>
<h3 id="func-insert_last"><a class="header" href="#func-insert_last">func <code>insert_last</code></a></h3>
<p>Cara kerjanya spt ini.</p>
<ul>
<li>kita buat dulu node nya (node yg tidak terhubung dgn siapapun pakai create_node)</li>
<li>lalu cek, misalkan head yg dari func <code>main</code> itu masih nullptr (karna emang defaultnya nullptr), maka pertanda linked listsnya masih kosong, maka kita bisa timpa saja.</li>
<li>jika tidak? kita simpan dulu node saat ini, anggap saja namanya current</li>
<li>sudah kesimpan kan? current kita arahkan ke <code>current-&gt;next</code>, alhasil dia ngakses pointer selanjutnya, lalu cek apakah dia nullptr atau bukan (sbg penanda)</li>
<li>misal iya, maka saatnya berhenti, lalu sambung, intinya karna dibelakang nullptr, maka untuk nyambungnya, nullptr kita ganti saja pakai address node yang barusan dibuat.</li>
<li>agar bisa nyambung kebelaknng, maka prev (previus miliknya new node) kita timpa pakai current, kenapa? node yg terbaru itu prev nya masih nullptr, agar nyambung, maka kita harus isi dengan node sebelumnya yg sudah disimpan.</li>
</ul>
<p>nb: <code>Node *&amp;head</code> artinya nge-deferensi pointer, sekaligus kalau ada perubahan data, sekalian di update, jadi misal ubah data di func delete_last, maka kalau dibaca oleh insert_first, data yg kita share tetep singkron</p>
<h3 id="func-insertfirst"><a class="header" href="#func-insertfirst">func <code>insertFirst</code></a></h3>
<p>nah, ini func paling easy wkwk, karna head guarantee akan selalu point ke depan, maka untuk nyispin data didepan sangatlah easy.</p>
<p>buat node baru, lalu node baru (next nya) diisi head.
untuk prev (milik nya node lama) kita addr node baru.</p>
<h3 id="func-delete_first"><a class="header" href="#func-delete_first">func <code>delete_first</code></a></h3>
<p>konsepnya mirip dengan insert first, hanya saja</p>
<ul>
<li>karna head selalu point ke depan, maka kita perlu simpan head (yang sekarang), lalu saatnya pindah state ke node sebelahnya (kekanan)</li>
<li>lalu lanjut mark bahwa head-&gt;prev itu nullptr, artinya headnya pindah.</li>
<li>ok sudah, nah, head yang tadi disimpan, bisa di hapus pakai <code>delete</code></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rumus-sector-disk-linux"><a class="header" href="#rumus-sector-disk-linux">Rumus sector disk Linux</a></h1>
<p>rumus sector linux</p>
<p>\( x \times 512 = (n \times 1024 \times 1024 \times 1024) \)</p>
<p>dan untuk \( n \) sesuaikan dengan kebutuhan.</p>
<p>disk sector mulai dari 2048. maka misal, x adalah 3145728, command parted nya
parted /dev/sda --script mkpart P1 ext4 2048s 3145728s
misal ingin menambah sekitar 500 MB, maka offset terakhir ditambah 1, misal</p>
<pre><code class="language-sh">parted /dev/sda --script mkpart P2 ext4 3145729s 4194304s
</code></pre>
<p>link referensi</p>
<ul>
<li><a href="https://wiki.archlinux.org/title/Parted#UEFI/GPT_examples">https://wiki.archlinux.org/title/Parted#UEFI/GPT_examples</a></li>
<li><a href="https://ioflood.com/blog/parted-linux-command/">https://ioflood.com/blog/parted-linux-command/</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="regex-notes"><a class="header" href="#regex-notes">Regex notes</a></h1>
<h2 id="letter--digits"><a class="header" href="#letter--digits">letter &amp; digits</a></h2>
<ul>
<li><code>\D+</code>: Matching all non digits, then  grouping</li>
</ul>
<h1 id="match-any-using-"><a class="header" href="#match-any-using-">match any using <code>.</code></a></h1>
<h2 id="the--match-all-chars-except-r-or-n"><a class="header" href="#the--match-all-chars-except-r-or-n">the <code>.</code> match all chars, except \r or \n</a></h2>
<p>example:
regexp: <code>r".+"</code></p>
<p>It will match anything as long as there is at least one character present. no empty string such ""</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="template-workspace-json-vscode"><a class="header" href="#template-workspace-json-vscode">template workspace json vscode</a></h1>
<pre><code class="language-json">{
  "folders": [
    {
      "path": "rpc"
    },
    {
      "path": "scraperlib"
    },
    {
      "path": "offlinelook"
    }
  ]
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="protobuf"><a class="header" href="#protobuf">Protobuf</a></h1>
<p>protobuf ini intinya format pertukaran data, mirip json, tapi dia pakai schema (mirip graphql), agak kaku, dan ada method2</p>
<p>baca spec: <a href="https://protobuf.dev/programming-guides/proto3/">https://protobuf.dev/programming-guides/proto3/</a></p>
<p>ini termasuk prelude nya</p>
<pre><code class="language-protobuf">syntax = "proto3";

// this is namefile 
package grpc.fadhil;
</code></pre>
<p>lalu ini anggap saja seperti struct, jika di C biasanya sent data over file pakai struct.</p>
<pre><code class="language-protobuf">message Message1 {}

message Message2 {
  Message1 foo = 1;
}

</code></pre>
<p>baru kita define semacam namespace yang didalamnya hold func func yang akan dicall oleh grpc</p>
<pre><code class="language-protobuf">service SearchService {
  rpc Search(SearchRequest) returns (SearchResponse);
}
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="subnetting"><a class="header" href="#subnetting">Subnetting</a></h1>
<p>pertama tama, range ip dahulu</p>
<ul>
<li>
<p>A: 1 - 127</p>
</li>
<li>
<p>B: 128 - 191</p>
</li>
<li>
<p>C: 192 - AKHIR</p>
</li>
<li>
<p><code>0b00000000</code> -&gt; 0 (katakanlah octet ke 4, cidr 24)</p>
</li>
<li>
<p><code>0b10000000</code> -&gt; 0 (cidr 25, 128 hosts)							// 2 network</p>
</li>
<li>
<p><code>0b11000000</code> -&gt; 0 (cidr 26, 128 + 64)								// 4 network</p>
</li>
<li>
<p><code>0b11100000</code> -&gt; 0 (cidr 27, 128 + 64 + 32)						// 8 network</p>
</li>
<li>
<p><code>0b11110000</code> -&gt; 0 (cidr 28, 128 + 64 + 32 + 16)					// 16 network</p>
</li>
<li>
<p><code>0b11111000</code> -&gt; 0 (cidr 29, 128 + 64 + 32 + 16 + 8)				// 32 network</p>
</li>
<li>
<p><code>0b11111100</code> -&gt; 0 (cidr 30, 128 + 64 + 32 + 16 + 8 + 4)			// 64 network</p>
</li>
<li>
<p><code>0b11111110</code> -&gt; 0 (cidr 31, 128 + 64 + 32 + 16 + 8 + 4 + 2)		// 128 network</p>
</li>
<li>
<p><code>0b11111111</code> -&gt; 0 (cidr 32, 128 + 64 + 32 + 16 + 8 + 4 + 2 + 1)	// 256 network</p>
</li>
</ul>
<p>seperti yg terlihat, bahwa <code>128 + 64 + 32 + 16 + 8 + 4 + 2 + 1</code> = <code>255</code></p>
<h2 id="contoh-19216810024"><a class="header" href="#contoh-19216810024">contoh 192.168.10.0/24:</a></h2>
<p>ada network 192.168.10.0/24, kita ingin bagi jadi 4 jaringan. maka 256 / 4 = 64 hosts, dan ini akan</p>
<ul>
<li>subnet nya: 255.255.255.192</li>
<li>64 hosts: 64 hosts usable, 1 untuk broadcast, 1 untuk network</li>
</ul>
<p>pembagian nya</p>
<ul>
<li>network 1:  192.168.10.0, broadcast: 192.168.10.63, range ip yang usable: 192.168.10.1 - 192.168.10.62</li>
<li>network 2:  192.168.10.64, broadcast: 192.168.10.127, range ip yang usable: 192.168.10.65 - 192.168.10.126</li>
<li>network 3:  192.168.10.128, broadcast: 192.168.10.191, range ip yang usable: 192.168.10.129 - 192.168.10.190</li>
<li>network 4:  192.168.10.192, broadcast: 192.168.10.255, range ip yang usable: 192.168.10.193 - 192.168.10.254</li>
</ul>
<h2 id="oprekan-hitung2-an"><a class="header" href="#oprekan-hitung2-an">oprekan hitung2 an:</a></h2>
<p>origin: pakai acuan ip kelas c</p>
<p>jumlah hosts, misal cidr 24, itu max nya 256 kalau 0b11111111, kenapa 0b10000000 itu 128, dan kenapa 0b11000000 itu 192</p>
<p>ok, lalu kenapa jika cidr /26, itu 255.255.255.192, punya 64 hosts, 4 network. semua ini didapat dari
(max int case ini 8 bit) / maxint - pad network</p>
<p>ini start dari /24</p>
<ul>
<li><code>0b00000000</code> -&gt; 0 (katakanlah octet ke 4, cidr 24)				// 1 network</li>
<li><code>0b10000000</code> -&gt; 0 (cidr 25, 128 hosts)							// 2 network</li>
<li><code>0b11000000</code> -&gt; 0 (cidr 26, 128 + 64)								// 4 network</li>
<li><code>0b11100000</code> -&gt; 0 (cidr 27, 128 + 64 + 32)						// 8 network</li>
<li><code>0b11110000</code> -&gt; 0 (cidr 28, 128 + 64 + 32 + 16)					// 16 network</li>
<li><code>0b11111000</code> -&gt; 0 (cidr 29, 128 + 64 + 32 + 16 + 8)				// 32 network</li>
<li><code>0b11111100</code> -&gt; 0 (cidr 30, 128 + 64 + 32 + 16 + 8 + 4)			// 64 network</li>
<li><code>0b11111110</code> -&gt; 0 (cidr 31, 128 + 64 + 32 + 16 + 8 + 4 + 2)		// 128 network</li>
<li><code>0b11111111</code> -&gt; 0 (cidr 32, 128 + 64 + 32 + 16 + 8 + 4 + 2 + 1)	// 256 network</li>
</ul>
<p>start dari /16</p>
<ul>
<li><code>0b0000000000000000</code> -&gt; 0 (cidr 16, 65535)								// 1 net, 65535 hosts</li>
<li><code>0b1000000000000000</code> -&gt; 0 (cidr 17, 65535 + )							// 2 net, 32767 hosts</li>
<li><code>0b1100000000000000</code> -&gt; 0 (cidr 26, 128 + 64)								// 4 net</li>
<li><code>0b1110000000000000</code> -&gt; 0 (cidr 27, 128 + 64 + 32)						// 8 net</li>
<li><code>0b1111000000000000</code> -&gt; 0 (cidr 28, 128 + 64 + 32 + 16)					// 16 net</li>
<li><code>0b1111100000000000</code> -&gt; 0 (cidr 29, 128 + 64 + 32 + 16 + 8)				// 32 net</li>
<li><code>0b1111110000000000</code> -&gt; 0 (cidr 30, 128 + 64 + 32 + 16 + 8 + 4)			// 64 net</li>
<li><code>0b1111111000000000</code> -&gt; 0 (cidr 31, 128 + 64 + 32 + 16 + 8 + 4 + 2)		// 128 net</li>
<li><code>0b1111111100000000</code> -&gt; 0 (cidr 32, 128 + 64 + 32 + 16 + 8 + 4 + 2 + 1)	// 256 net</li>
</ul>
<p>-- stagging (perhitungan ip cidr 16 keatas)
max int 16 bit: 65536</p>
<ul>
<li>/16 : <code>0b0000000000000000</code> = 0</li>
<li>/17 : <code>0b1000000000000000</code> = 32768, maka 65536 / 32768 = 2, alias 2 network, 32768 hosts</li>
<li>/18 : <code>0b1100000000000000</code> = 49152, maka 65536 / (65536 - 49152)  = 4 network, 16384 hosts,</li>
<li>/19 : <code>0b1110000000000000</code> = 57344, maka 65536 / (65536 - 57344)  = 8 network, 8192 hosts,</li>
<li>/20 : <code>0b1111000000000000</code> = 61440, maka 65536 / (65536 - 61440)  = 16 network, 4096 hosts,</li>
<li>/21 : <code>0b1111100000000000</code> = 61440, maka 65536 / (65536 - 61440)  = 32 network, 2048 hosts,</li>
<li>/22 : <code>0b1111110000000000</code> = 64512, maka 65536 / (65536 - 64512)  = 64 network, 1024 hosts,</li>
<li>/23 : <code>0b1111111000000000</code> = 64512, maka 65536 / (65536 - 64512)  = 128 network, 512 hosts,</li>
<li>/24 : <code>0b1111111100000000</code> = 64512, maka 65536 / (65536 - 64512)  = 256 network, 256 hosts,</li>
</ul>
<p>-- stagging cidr 8 keatas
max int int 24 bit: 16777216</p>
<ul>
<li>
<p>/9 : <code>0b100000000000000000000000</code> = 16777216 / (16777216 - 8388608) = 2 network, 8388608 hosts</p>
</li>
<li>
<p>/10: <code>0b110000000000000000000000</code> = 16777216 / (16777216 - 12582912)= 4 network, 4194304 hosts</p>
</li>
<li>
<p>/11: <code>0b111000000000000000000000</code> = 16777216 / (16777216 - 14680064)= 8 network, 2097152 hosts</p>
</li>
<li>
<p>/12: <code>0b111100000000000000000000</code> = 16777216 / (16777216 - 15728640)= 16 network, 1048576 hosts</p>
</li>
<li>
<p>/13: <code>0b111110000000000000000000</code> = 16777216 / (16777216 - 16252928)= 32 network, 524288 hosts</p>
</li>
<li>
<p>/14: <code>0b111111000000000000000000</code> = 16777216 / (16777216 - 16515072) = 64 network, 262144 hosts</p>
</li>
<li>
<p>/15: <code>0b111111100000000000000000</code> = 16777216 / (16777216 - 16646144) = 128 network, 131072 hosts</p>
</li>
<li>
<p>/16: <code>0b111111110000000000000000</code> = 16777216 / (16777216 - 16711680) = 256 network, 65536 hosts</p>
</li>
<li>
<p>/17: <code>0b111111111000000000000000</code> = 16777216 / (16777216 - 16744448) = 512 network, 32768 hosts</p>
</li>
<li>
<p>/18: <code>0b111111111100000000000000</code> = 16777216 / (16777216 - 16760832) = 1024 network, 16384 hosts</p>
</li>
<li>
<p>/19: <code>0b111111111110000000000000</code> = 16777216 / (16777216 - 16769024) = 2048 network, 8192 hosts</p>
</li>
<li>
<p>/20: <code>0b111111111111000000000000</code> = 16777216 / (16777216 - 16773120) = 4096 network, 4096 hosts</p>
</li>
<li>
<p>/21: <code>0b111111111111100000000000</code> = 16777216 / (16777216 - 16775168) = 8192 network, 2048 hosts</p>
</li>
<li>
<p>/9 : 0b100000000000000000000000:</p>
</li>
</ul>
<h1 id="kumpulan-rumus-rumus"><a class="header" href="#kumpulan-rumus-rumus">kumpulan rumus rumus</a></h1>
<h2 id="subnet"><a class="header" href="#subnet">subnet</a></h2>
<p>rumusnya: \( 2^{jumlah \space angka \space 1 \space di \space setiap \space padding \space subnet}\)</p>
<h3 id="contoh"><a class="header" href="#contoh">contoh</a></h3>
<ul>
<li>prefix /19, pad terdekatnya /16, maka dari 16 ke 19 ada 3 angka 1 (<code>0b11100000</code>), maka jumlah subnet yang akan terbentuk adalah 2^3 = 8 subnet</li>
<li>prefix /26, pad terdekatnya 24, maka dari 24 ke 26 ada 2 angka 1 (<code>0b11000000</code>), maka jumlah subnetnya 2^2 = 4</li>
</ul>
<h2 id="jumlah-hosts"><a class="header" href="#jumlah-hosts">jumlah hosts</a></h2>
<p>rumusnya: \( 2^{jumlah \space angka \space 0 \space dari \space 32} \)</p>
<h3 id="contoh-1"><a class="header" href="#contoh-1">contoh</a></h3>
<ul>
<li>prefix /19, 32 - 19 = 13 angka 0, maka \( 2^{13} = 8192 \space hosts \)</li>
<li>prefix /26, 32 - 26 = 6 angka 0, maka \( 2^{6} = 64 \space hosts \)</li>
<li>prefix /8, 32 - 8 = 24 angka 0, maka \( 2^{24} = 16777216 \space hosts \)</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inter-vlan-routing"><a class="header" href="#inter-vlan-routing">Inter-VLAN routing</a></h1>
<p>how to config vlan inter-VLAN routing</p>
<p>topology:</p>
<ul>
<li>VNET1:192.168.10.0/24 (vlan 10)</li>
<li>PC1: 192.168.10.2</li>
<li>PC2: 192.168.10.3</li>
<li>VNET2:192.168.20.0/24 (vlan 20)</li>
<li>PC3: 192.168.20.2</li>
<li>PC4: 192.168.20.3</li>
<li>ROUTER IP (fa0/0.10): 192.168.10.1</li>
<li>ROUTER IP (fa0/0.20): 192.168.20.1</li>
</ul>
<h1 id="scripts"><a class="header" href="#scripts">SCRIPTS</a></h1>
<h2 id="management"><a class="header" href="#management">management</a></h2>
<h3 id="--show-vlan-brief-show-all-configured-vlan"><a class="header" href="#--show-vlan-brief-show-all-configured-vlan">- <code>show vlan brief</code>: show all configured vlan</a></h3>
<h2 id="setup-vlan-tanpa-setup-ip-dulu"><a class="header" href="#setup-vlan-tanpa-setup-ip-dulu">setup vlan (tanpa setup ip dulu)</a></h2>
<pre><code class="language-sh">Switch&gt;enable
Switch#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
Switch(config)#vlan 10
Switch(config-vlan)#name SALES
Switch(config-vlan)#ex
Switch(config)#vlan 20
Switch(config-vlan)#name IT
</code></pre>
<h2 id="lalu-setup-mode"><a class="header" href="#lalu-setup-mode">lalu setup mode</a></h2>
<ul>
<li>trunk: untuk switch ke router</li>
<li>access: untuk switch ke PC</li>
</ul>
<p>setup untuk vlan 10 dan 10, masing2 dengan network 192.168.10.0/24 dan 192.168.20.0/24</p>
<p>script:</p>
<pre><code class="language-sh">Switch#conf t
Enter configuration commands, one per line.  End with CNTL/Z.
Switch(config)#int fa0/1
Switch(config-if)#switchport mode access
Switch(config-if)#switchport access vlan 10
Switch(config-if)#ex
Switch(config)#int fa0/2
Switch(config-if)#switchport mode access
Switch(config-if)#switchport access vlan 10
Switch(config-if)#ex
Switch(config)#int fa0/3
Switch(config-if)#switchport mode access
Switch(config-if)#switchport access vlan 20
Switch(config-if)#ex
Switch(config)#int fa0/4
Switch(config-if)#switchport mode access
Switch(config-if)#switchport access vlan 20
Switch(config-if)#ex
Switch(config)#
</code></pre>
<p>alternative script</p>
<pre><code class="language-sh">Switch(config-if)#int range fa0/1-4
Switch(config-if-range)#switchport mode access
</code></pre>
<h2 id="config-untuk-port-fa05-ke-router-pakai-mode-trunk"><a class="header" href="#config-untuk-port-fa05-ke-router-pakai-mode-trunk">config untuk port fa0/5 ke router (pakai mode trunk)</a></h2>
<pre><code class="language-sh">Switch(config)#int fa0/5
Switch(config-if)#switchport mode trunk
Switch(config-if)#
</code></pre>
<h1 id="inter-vlan-routing-1"><a class="header" href="#inter-vlan-routing-1">inter-VLAN routing</a></h1>
<h2 id="enable-port-fa00-tanpa-assign-ip-dahulu"><a class="header" href="#enable-port-fa00-tanpa-assign-ip-dahulu">enable port Fa0/0 (tanpa assign ip dahulu)</a></h2>
<pre><code class="language-sh">Router(config)#int fa0/0
Router(config-if)#no shut

Router(config-if)#
%LINK-5-CHANGED: Interface FastEthernet0/0, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0, changed state to up
</code></pre>
<h2 id="assign-ip-untuk-masing2-vlan"><a class="header" href="#assign-ip-untuk-masing2-vlan">assign ip untuk masing2 vlan</a></h2>
<pre><code class="language-sh">Router(config)#interface FastEthernet0/0
Router(config-if)#int fa0/0.10
Router(config-subif)#
%LINK-5-CHANGED: Interface FastEthernet0/0.10, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.10, changed state to up

Router(config-subif)#encapsulation dot1q 10 
Router(config-subif)#ip add 192.168.10.1 255.255.255.0
Router(config-subif)#ex
Router(config)#int fa0/0.20
Router(config-subif)#
%LINK-5-CHANGED: Interface FastEthernet0/0.20, changed state to up

%LINEPROTO-5-UPDOWN: Line protocol on Interface FastEthernet0/0.20, changed state to up

Router(config-subif)#encapsulation dot1q 20
Router(config-subif)#ip add 192.168.20.1 255.255.255.0
Router(config-subif)#
</code></pre>
<h2 id="hasil-output-show-vlan-brief"><a class="header" href="#hasil-output-show-vlan-brief">hasil output <code>show vlan brief</code></a></h2>
<pre><code class="language-sh">Switch&gt;show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa0/6, Fa0/7, Fa0/8, Fa0/9
                                                Fa0/10, Fa0/11, Fa0/12, Fa0/13
                                                Fa0/14, Fa0/15, Fa0/16, Fa0/17
                                                Fa0/18, Fa0/19, Fa0/20, Fa0/21
                                                Fa0/22, Fa0/23, Fa0/24, Gig0/1
                                                Gig0/2
10   SALES                            active    Fa0/1, Fa0/2
20   IT                               active    Fa0/3, Fa0/4
1002 fddi-default                     active    
1003 token-ring-default               active    
1004 fddinet-default                  active    
1005 trnet-default                    active    
Switch&gt;
</code></pre>
<h2 id="tambahan-1"><a class="header" href="#tambahan-1">tambahan</a></h2>
<ul>
<li>encapsulation dot1q: router on stick routing</li>
</ul>
<h3 id="advanced-switch-cisco-command"><a class="header" href="#advanced-switch-cisco-command">Advanced switch cisco command</a></h3>
<div style="break-before: page; page-break-before: always;"></div><h1 id="tealinux-qemu-promp--testing"><a class="header" href="#tealinux-qemu-promp--testing">Tealinux qemu promp &amp; testing</a></h1>
<h2 id="create-image"><a class="header" href="#create-image">create image</a></h2>
<p><code>qemu-img create -f qcow2 &lt;NAME&gt;.img 45G</code></p>
<ul>
<li>Change 45G with your desired size</li>
</ul>
<h2 id="running-system-on-bios-mode"><a class="header" href="#running-system-on-bios-mode">running system on BIOS mode</a></h2>
<p>this will open SSH connection on port 20022</p>
<h2 id="live"><a class="header" href="#live">live</a></h2>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -boot order=d \
                -cdrom tealinux-2025.02.16-x86_64.iso \
                -drive file=tealinux.img,format=qcow2 \
                -m 4G \
                -enable-kvm \
                -smp 4 \
                -net user,hostfwd=tcp::20022-:22 \
                -net nic
</code></pre>
<h2 id="non-live"><a class="header" href="#non-live">non-live</a></h2>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -boot order=d \
                -drive file=tealinux.img,format=qcow2 \
                -m 4G \
                -enable-kvm \
                -smp 4 \
                -net user,hostfwd=tcp::20022-:22 \
                -net nic
</code></pre>
<h2 id="running-on-uefi-mode"><a class="header" href="#running-on-uefi-mode">running on UEFI mode</a></h2>
<p>in order to running qemu on UEFI mode, we need <a href="https://archlinux.org/packages/extra/any/edk2-ovmf/">edk2-ovmf</a></p>
<p>get your ovmf vars by running <code>cp /usr/share/edk2/x64/OVMF_VARS.4m.fd .</code></p>
<h2 id="live-1"><a class="header" href="#live-1">live</a></h2>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -cdrom tealinux-2025.02.16-x86_64.iso \
                -boot order=d \
                -drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/x64/OVMF_CODE.4m.fd \
                -drive if=pflash,format=raw,file=OVMF_VARS.4m.fd \
                -drive file=tealinux.img,format=qcow2 \
                -m 4G \
                -enable-kvm \
                -smp 4 \
                -net user,hostfwd=tcp::20022-:22 \
                -net nic
</code></pre>
<h2 id="non-live-1"><a class="header" href="#non-live-1">non-live</a></h2>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -boot order=d \
                -drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/x64/OVMF_CODE.4m.fd \
                -drive if=pflash,format=raw,file=OVMF_VARS.4m.fd \
                -drive file=tealinux.img,format=qcow2 \
                -m 4G \
                -enable-kvm \
                -smp 4 \
                -net user,hostfwd=tcp::20022-:22 \
                -net nic
</code></pre>
<h2 id="windows"><a class="header" href="#windows">windows</a></h2>
<pre><code class="language-sh">qemu-system-x86_64 \
                -enable-kvm \
                -boot order=d \
                -cdrom Win10_22H2_English_x64v1.iso \
                -drive file=windows-tealinux-mbr.img,format=qcow2 \
                -m 4G \
                -enable-kvm \
                -smp 4 \
                -net user,hostfwd=tcp::20022-:22 \
                -net nic
</code></pre>
<p>uefi version</p>
<pre><code class="language-sh">qemu-system-x86_64 \
                 -enable-kvm \
                 -boot order=d \
                 -cdrom Win10_22H2_English_x64v1.iso \
                 -drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/x64/OVMF_CODE.4m.fd \
                 -drive if=pflash,format=raw,file=OVMF_VARS.4m.fd \
                 -drive file=tealinux.img,format=qcow2 \
                 -m 4G \
                 -enable-kvm \
                 -smp 4 \
                 -net user,hostfwd=tcp::20022-:22
</code></pre>
<p>note: bug unwrap error</p>
<pre><code class="language-sh">qemu-system-x86_64 \
                      -enable-kvm \
                      -boot order=d \
                      -cdrom tealinux-2025.02.16-x86_64.iso \
      -drive if=pflash,format=raw,readonly=on,file=/usr/share/edk2/x64/OVMF_CODE.4m.fd \
                      -drive if=pflash,format=raw,file=OVMF_VARS.4m.fd \
                      -drive file=tealinux.img,format=qcow2 \
                      -m 4G \
                      -enable-kvm \
                      -smp 4 \
                      -net user,hostfwd=tcp::20022-:22 \
      -net nic
</code></pre>
<h2 id="misc"><a class="header" href="#misc">misc</a></h2>
<h3 id="add-more-drive"><a class="header" href="#add-more-drive">add more drive</a></h3>
<p>in order add more drive, use this param</p>
<ul>
<li><code>-drive file=img1.img,format=qcow2</code></li>
<li><code>-drive file=img1.img,format=qcow2</code></li>
</ul>
<h2 id="forward-more-port"><a class="header" href="#forward-more-port">forward more port</a></h2>
<p>imagine you need to forward another port, not only ssh, the correct command is
<code>-net user,hostfwd=tcp::10022-:22,hostfwd=tcp::8080-:8080,hostfwd=tcp::5173-:5173</code></p>
<p>5173 is our port.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            MathJax.Hub.Register.StartupHook('End', function() {
                window.setTimeout(window.print, 100);
            });
        });
        </script>

    </div>
    </body>
</html>
